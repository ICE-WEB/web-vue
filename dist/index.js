!function(t){function e(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./dist/",e(e.s=11)}([function(t,e,r){"use strict";var o=r(4);e.a=function(t){return void 0===t.data&&(t.data={}),0!=t.loading&&o.a.show(),$.ajax({url:"http://gumx.top:90/"+t.url,data:t.data,type:"post",cache:!1,dataType:"json",success:function(e){0!=t.loading&&o.a.hide(),0==e.errCode?"function"==typeof t.success&&t.success(e):(0!=t.alert&&void 0!==e.errMsg&&layer.alert(e.errMsg,{title:"警告",icon:2,scrollbar:!1}),"function"==typeof t.error&&t.error(e))},error:function(e,r,a){200==e.status?setTimeout(function(){window.location.href="web_user_page_login.do"},500):(0!=t.loading&&o.a.hide(),"abort"!=a&&(0!=t.alert&&layer.alert("系统错误（链接中断）！",{title:"警告",icon:2,scrollbar:!1}),"function"==typeof t.error&&t.error()))},complete:function(e,r){"function"==typeof t.complete&&t.complete(r)}})}},,,,function(t,e,r){"use strict";function o(){}o.prototype.show=function(){$("#loading").show()},o.prototype.hide=function(){$("#loading").hide()};var a=new o;e.a=a},,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(12),a=r(14),n=r(15);new Vue({el:".l-main-container",data:{sort:[],text:[],contentView:"list",searchTitle:"",selectedSortId:-1,selectedText:null,page:n.a},mounted:function(){o.a.init()},created:function(){a.a.getSort(this.sort),a.a.getText(this.text,n.a,{})},computed:{selectedSort:function(){var t={id:-1,name:"全部"},e=this;return this.sort.forEach(function(r){if(e.selectedSortId==r.id)return void(t=r)}),t}},watch:{selectedSortId:function(t){this.searchText()}},methods:{sortName:function(t){var e="";return this.sort.forEach(function(r){if(t==r.id)return void(e=r.name)}),e},searchText:function(){this.selectedText=null,this.contentView="list",a.a.getText(this.text,n.a,{sort_id:this.selectedSortId,title:this.searchTitle}),console.log(),jQuery(".page").scrollTop()>250&&$(".page").scrollTop(250)},readText:function(t){this.contentView="text",this.selectedText=t,a.a.readText(t.id)}}})},function(t,e,r){"use strict";var o=r(13),a={COOKIE_THEME:"color-theme",$colorItems:$(".color-themes > li"),colors:{default:"main-default",cyan:"main-cyan",green:"main-green",red:"main-red",yellow:"main-yellow",blue:"main-blue"},init:function(){var t=this;t.curCookieTheme(),t.$colorItems.on("click",function(){t.$colorItems.removeClass("is-active"),$(this).addClass("is-active");var e=$(this).data("color");t.setTheme(e),t.replaceMarkerForMaps(e),t.replaceImages(e)}),$("[data-reset]").on("resetColors",function(){t.setTheme("default"),t.replaceMarkerForMaps("default"),t.replaceImages("default"),o.a.set(t.COOKIE_THEME,"default"),t.setActiveItem("default")})},curCookieTheme:function(){var t=o.a.get(this.COOKIE_THEME);t?(this.preloaderV1(t),this.setTheme(t),this.replaceMarkerForMaps(t),this.replaceImages(t),this.setActiveItem(t)):(this.pageShow(),this.preloaderV1("default"))},preloaderV1:function(t){var e=$(".color-theme-preloader");if(e.length){var r=this.replaceSrcForImg(t,e.attr("src")),o=new Image;o.src=r,o.onload=function(){e.attr("src",r).css("visibility","visible")}}},setActiveItem:function(t){this.$colorItems.removeClass("is-active"),this.$colorItems.each(function(){$(this).data("color")===t&&$(this).addClass("is-active")})},setTheme:function(t){var e=$("link[data-themecolor]"),r=e.data("themecolor"),a=e.attr("href");r!==t&&(a=a.replace(this.colors[r]+".css",this.colors[t]+".css"),e.data("themecolor",t),e.attr("href",a),o.a.get(this.COOKIE_THEME)!==t&&o.a.set(this.COOKIE_THEME,t))},replaceSrcForImg:function(t,e){var r=e.split("."),o=r[r.length-2].split("-");return o[o.length-1]===t?e:(o[o.length-1]=t,o=o.join("-"),r[r.length-2]=o,r.join("."))},replaceImages:function(t){var e=this,r=$(".color-theme"),o=r.length,a=0;r.each(function(){var r=new Image,n=e.replaceSrcForImg(t,$(this).attr("src"));if(!n)return void a++;$(this).attr("src",n),r.src=n,r.onload=function(){++a===o&&e.pageShow()}})},replaceMarkerForMaps:function(t){var e=this,r=$(".b-google-map.map-theme");if(r.length>0){var o=e.replaceSrcForImg(t,$(".marker-template").attr("src"));if(!o)return;$(".marker-template").attr("src",o),r.trigger("replace_marker")}$(".color-theme").each(function(){var e,r=$(this).attr("src").split("."),o=r[r.length-2].split("-");o[o.length-1]!==t&&(o[o.length-1]=t,o=o.join("-"),r[r.length-2]=o,e=r.join("."),$(this).attr("src",e))})},pageShow:function(){setTimeout(function(){$(".mask-l").animate({opacity:0},800,function(){$(this).css("display","none")})},400)}};e.a=a},function(t,e,r){"use strict";function o(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function a(t,e,r){r=r||{};var o=r.expires;if("number"==typeof o&&o){var a=new Date;a.setTime(a.getTime()+1e3*o),o=r.expires=a}o&&o.toUTCString&&(r.expires=o.toUTCString()),e=encodeURIComponent(e);var n=t+"="+e;for(var i in r){n+="; "+i;var c=r[i];!0!==c&&(n+="="+c)}document.cookie=n}function n(t){a(t,"",{expires:-1})}e.a={get:o,set:a,del:n}},function(t,e,r){"use strict";function o(){this.api={sort:"admin/sort/query.api",text:"admin/text/query.api",read:"admin/text/read.api"},o.prototype.getSort=function(t){Object(a.a)({url:this.api.sort,success:function(e){t.splice(0,t.length),e.vals.forEach(function(e){t.push(e)})}})},o.prototype.getText=function(t,e,r){-1==r.sort_id&&(r.sort_id=""),r.page=e.currPage,r.pageSize=e.pageSize,Object(a.a)({url:this.api.text,data:r,success:function(r){t.splice(0,t.length),r.vals.forEach(function(e){t.push(e)}),e.totalCount=r.count}})},o.prototype.readText=function(t){Object(a.a)({url:this.api.read,data:{id:t,type:"html"},success:function(t){var e=t.val;e=e.replace("<p>—summary—<br>","<blockquote><p>").replace("—summary—</p>","</p></blockquote>"),$("#textContent").html(e)}})}}var a=r(0);e.a=new o},function(t,e,r){"use strict";var o={currPage:1,pageSize:5,totalCount:0,totalPage:0},a={};Object.defineProperty(o,"totalCount",{get:function(){return a.totalCount},set:function(t){a.totalCount=t,o.totalPage=parseInt(t/o.pageSize)+(t%o.pageSize>0?1:0),console.log(o)}}),e.a=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDYyZmNmN2EzODE1NGViYzhmMjkxIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYWpheC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2xvYWRpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9qcy9jb2xvci10aGVtZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9qcy9jb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi9qcy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy93ZWIvanMvcGFnZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fbG9hZGluZ19qc19fIiwianNvbiIsImRhdGEiLCJsb2FkaW5nIiwic2hvdyIsIiQiLCJhamF4IiwidXJsIiwidHlwZSIsImNhY2hlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiaGlkZSIsImVyckNvZGUiLCJhbGVydCIsImVyck1zZyIsImxheWVyIiwidGl0bGUiLCJpY29uIiwic2Nyb2xsYmFyIiwiZXJyb3IiLCJYTUxIdHRwUmVxdWVzdCIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsInN0YXR1cyIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb21wbGV0ZSIsIlhIUiIsIlRTIiwiTG9hZGluZyIsInZhbHVlIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19qc19jb2xvcl90aGVtZXNfanNfXyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19qc19wYWdlX2pzX18iLCJWdWUiLCJlbCIsInNvcnQiLCJ0ZXh0IiwiY29udGVudFZpZXciLCJzZWFyY2hUaXRsZSIsInNlbGVjdGVkU29ydElkIiwic2VsZWN0ZWRUZXh0IiwicGFnZSIsIm1vdW50ZWQiLCJpbml0IiwiY3JlYXRlZCIsImdldFNvcnQiLCJ0aGlzIiwiZ2V0VGV4dCIsImNvbXB1dGVkIiwic2VsZWN0ZWRTb3J0IiwiaWQiLCJ0aGF0IiwiZm9yRWFjaCIsImUiLCJ3YXRjaCIsIm52Iiwic2VhcmNoVGV4dCIsIm1ldGhvZHMiLCJzb3J0TmFtZSIsInNvcnRfaWQiLCJjb25zb2xlIiwibG9nIiwialF1ZXJ5Iiwic2Nyb2xsVG9wIiwicmVhZFRleHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fIiwiY29sb3JUaGVtZSIsIkNPT0tJRV9USEVNRSIsIiRjb2xvckl0ZW1zIiwiY29sb3JzIiwiZGVmYXVsdCIsImN5YW4iLCJncmVlbiIsInJlZCIsInllbGxvdyIsImJsdWUiLCJzZWxmIiwiY3VyQ29va2llVGhlbWUiLCJvbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjdXJFbGVtZW50Iiwic2V0VGhlbWUiLCJyZXBsYWNlTWFya2VyRm9yTWFwcyIsInJlcGxhY2VJbWFnZXMiLCJzZXQiLCJzZXRBY3RpdmVJdGVtIiwicHJlbG9hZGVyVjEiLCJwYWdlU2hvdyIsImN1clRoIiwiJGNvbG9yVGhlbWVQcmVsb2FkZXIiLCJsZW5ndGgiLCJuZXdTcmMiLCJyZXBsYWNlU3JjRm9ySW1nIiwiYXR0ciIsInRlbXBJbWciLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImNzcyIsInRoZW1lIiwiZWFjaCIsIiRsaW5rVGhlbWUiLCJjdXJUaGVtZSIsImF0dHJFbCIsInJlcGxhY2UiLCJjdXJTcmMiLCJzcGxpdCIsInNyY1VwZCIsImpvaW4iLCIkaW1nVGhlbWUiLCJpbWdUaGVtZU51bSIsImNvdW50SW1nIiwiaW1nIiwiJG1hcCIsInRyaWdnZXIiLCJzcmNOZXdUaGVtZSIsImFuaW1hdGUiLCJvcGFjaXR5IiwiZ2V0Q29va2llIiwibWF0Y2hlcyIsImRvY3VtZW50IiwiY29va2llIiwibWF0Y2giLCJSZWdFeHAiLCJkZWNvZGVVUklDb21wb25lbnQiLCJ1bmRlZmluZWQiLCJzZXRDb29raWUiLCJvcHRpb25zIiwiZXhwaXJlcyIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInRvVVRDU3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidXBkYXRlZENvb2tpZSIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwiZGVsZXRlQ29va2llIiwiZGVsIiwiRGF0YSIsImFwaSIsInJlYWQiLCJ2YWxzIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jb21tb25fYWpheF9qc19fIiwic3BsaWNlIiwicHVzaCIsIm9wdGlvbiIsImN1cnJQYWdlIiwicGFnZVNpemUiLCJ0b3RhbENvdW50IiwiY291bnQiLCJ0ZXh0SWQiLCJjb250ZW50IiwidmFsIiwiaHRtbCIsInRvdGFsUGFnZSIsInRlbXAiLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FB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QUNsQzFLLE9BQUFrSyxFQUFBLElBQ0M3SSxJQUFJMkMsS0FBSytGLElBQUlDLEtBQ2JoSixNQUFNb0QsR0FBR3NHLEVBQU9wSixLQUFLLFFBQ3JCRyxRQUFRLFNBQVNULEdBQ2hCLEdBQUkySixHQUFVM0osRUFBSzRKLEdBQ25CRCxHQUFVQSxFQUFRaEQsUUFBUSxtQkFBbUIsbUJBQW1CQSxRQUFRLGdCQUFnQixxQkFTeEZ4RyxFQUFFLGdCQUFnQjBKLEtBQUtGLE9Qb2FOLEdBQUlULEdBQWdEaEwsRUFBb0IsRU83WjdGMkIsR0FBQSxLQUFtQmlKLElQK2RiLFNBQVV4SyxFQUFRdUIsRUFBcUIzQixHQUU3QyxZUTFoQkEsSUFBSXlFLElBQ0gyRyxTQUFXLEVBQ1hDLFNBQVcsRUFDWEMsV0FBYSxFQUNiTSxVQUFZLEdBR1RDLElBRUovSyxRQUFPQyxlQUFlMEQsRUFBSyxjQUMxQnZELElBQUksV0FDSCxNQUFPMkssR0FBS1AsWUFFYmpFLElBQUksU0FBU3FFLEdBQ1pHLEVBQUtQLFdBQWFJLEVBQ2xCakgsRUFBS21ILFVBQVlFLFNBQVNKLEVBQU1qSCxFQUFLNEcsV0FBYUssRUFBTWpILEVBQUs0RyxTQUFXLEVBQUksRUFBSSxHQUNoRnpGLFFBQVFDLElBQUlwQixNQUtkOUMsRUFBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL2Rpc3QvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTEpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2xvYWRpbmdfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbi8qXHJcblx0anNvbuS4reeahOWPguaVsFxyXG5cdHVybDror7fmsYLlnLDlnYAsIFx05LiN6IO95Li656m6XHJcblx0ZGF0YTrlj4LmlbAgICAgICBcdOWPr+S7peS4uuepulxyXG5cdHN1Y2Nlc3M65oiQ5Yqf55qE5Zue6LCD5Ye95pWwIOWPr+S7peS4uuepuiBcclxuXHRlcnJvcjog5aSx6LSl55qE5Zue6LCD5Ye95pWwIOWPr+S7peS4uuepulxyXG5cdGxvYWRpbmc6IOaYr+WQpumakOiXj+WKoOi9veWKqOeUuyDlj6/ku6XkuLrnqbpcdOm7mOiupOaYvuekuiB0cnVlL2ZhbHNlXHJcblx0YWxlcnQ6IOaYr+WQpumakOiXj+mUmeivr+aPkOekuiDlj6/ku6XkuLrnqbog6buY6K6k5o+Q56S6IHRydWUvZmFsc2VcclxuXHQgICAgICAgICAgICBcclxuXHQvL+aooeadv1xyXG5cdGFqYXgoe1xyXG5cdFx0dXJsOlwiXCIsXHJcblx0XHRkYXRhOmRhdGEsXHJcblx0XHRzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xyXG5cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbiovXG5cbi8vIHZhciBsb2FkaW5nID0gcmVxdWlyZSgnLi9sb2FkaW5nLmpzJyk7XG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChmdW5jdGlvbiAoanNvbikge1xuXHRpZiAodHlwZW9mIGpzb24uZGF0YSA9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0anNvbi5kYXRhID0ge307XG5cdH1cblxuXHRpZiAoZmFsc2UgIT0ganNvbi5sb2FkaW5nKSB7XG5cdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19sb2FkaW5nX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uc2hvdygpO1xuXHR9XG5cdHZhciBhamF4ID0gJC5hamF4KHtcblx0XHR1cmw6IFwiaHR0cDovL2d1bXgudG9wOjkwL1wiICsganNvbi51cmwsXG5cdFx0ZGF0YToganNvbi5kYXRhLFxuXHRcdHR5cGU6ICdwb3N0Jyxcblx0XHRjYWNoZTogZmFsc2UsXG5cdFx0ZGF0YVR5cGU6ICdqc29uJyxcblx0XHRzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcblx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmxvYWRpbmcpIHtcblx0XHRcdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19sb2FkaW5nX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uaGlkZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZGF0YS5lcnJDb2RlID09IDApIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBqc29uLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0anNvbi5zdWNjZXNzKGRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5hbGVydCAmJiB0eXBlb2YgZGF0YS5lcnJNc2cgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdGxheWVyLmFsZXJ0KGRhdGEuZXJyTXNnLCB7IHRpdGxlOiAn6K2m5ZGKJywgaWNvbjogMiwgc2Nyb2xsYmFyOiBmYWxzZSB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0eXBlb2YganNvbi5lcnJvciA9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRqc29uLmVycm9yKGRhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRlcnJvcjogZnVuY3Rpb24gZXJyb3IoWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG5cdFx0XHRpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwid2ViX3VzZXJfcGFnZV9sb2dpbi5kb1wiO1xuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5sb2FkaW5nKSB7XG5cdFx0XHRcdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19sb2FkaW5nX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uaGlkZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChlcnJvclRocm93biAhPSBcImFib3J0XCIpIHtcblx0XHRcdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5hbGVydCkge1xuXHRcdFx0XHRcdFx0bGF5ZXIuYWxlcnQoJ+ezu+e7n+mUmeivr++8iOmTvuaOpeS4reaWre+8ie+8gScsIHsgdGl0bGU6ICforablkYonLCBpY29uOiAyLCBzY3JvbGxiYXI6IGZhbHNlIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHlwZW9mIGpzb24uZXJyb3IgPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0XHRqc29uLmVycm9yKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUoWEhSLCBUUykge1xuXHRcdFx0aWYgKHR5cGVvZiBqc29uLmNvbXBsZXRlID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRqc29uLmNvbXBsZXRlKFRTKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBhamF4O1xufSk7XG5cbi8qKiovIH0pLFxuLyogMSAqLyxcbi8qIDIgKi8sXG4vKiAzICovLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIExvYWRpbmcoKSB7fVxuTG9hZGluZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcblx0JChcIiNsb2FkaW5nXCIpLnNob3coKTtcbn07XG5cbkxvYWRpbmcucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG5cdCQoXCIjbG9hZGluZ1wiKS5oaWRlKCk7XG59O1xudmFyIGxvYWRpbmcgPSBuZXcgTG9hZGluZygpO1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChsb2FkaW5nKTtcblxuLyoqKi8gfSksXG4vKiA1ICovLFxuLyogNiAqLyxcbi8qIDcgKi8sXG4vKiA4ICovLFxuLyogOSAqLyxcbi8qIDEwICovLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19qc19jb2xvcl90aGVtZXNfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19qc19wYWdlX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblxuXG5cblxudmFyIGFwcCA9IG5ldyBWdWUoe1xuXHRlbDogXCIubC1tYWluLWNvbnRhaW5lclwiLFxuXHRkYXRhOiB7XG5cdFx0c29ydDogW10sXG5cdFx0dGV4dDogW10sXG5cdFx0Y29udGVudFZpZXc6IFwibGlzdFwiLCAvL3RleHQvbGlzdFxuXHRcdHNlYXJjaFRpdGxlOiBcIlwiLFxuXHRcdHNlbGVjdGVkU29ydElkOiAtMSxcblx0XHRzZWxlY3RlZFRleHQ6IG51bGwsXG5cdFx0cGFnZTogX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19qc19wYWdlX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL11cblx0fSxcblx0bW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHtcblx0XHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2pzX2NvbG9yX3RoZW1lc19qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmluaXQoKTtcblx0fSxcblx0Y3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0XHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX2pzX2RhdGFfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5nZXRTb3J0KHRoaXMuc29ydCk7XG5cdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19qc19kYXRhX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uZ2V0VGV4dCh0aGlzLnRleHQsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fanNfcGFnZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7fSk7XG5cdH0sXG5cdGNvbXB1dGVkOiB7XG5cdFx0c2VsZWN0ZWRTb3J0OiBmdW5jdGlvbiBzZWxlY3RlZFNvcnQoKSB7XG5cdFx0XHR2YXIgcyA9IHsgaWQ6IC0xLCBuYW1lOiBcIuWFqOmDqFwiIH07XG5cdFx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0XHR0aGlzLnNvcnQuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRpZiAodGhhdC5zZWxlY3RlZFNvcnRJZCA9PSBlLmlkKSB7XG5cdFx0XHRcdFx0cyA9IGU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBzO1xuXHRcdH1cblx0fSxcblx0d2F0Y2g6IHtcblx0XHRzZWxlY3RlZFNvcnRJZDogZnVuY3Rpb24gc2VsZWN0ZWRTb3J0SWQobnYpIHtcblx0XHRcdHRoaXMuc2VhcmNoVGV4dCgpO1xuXHRcdH1cblx0fSxcblx0bWV0aG9kczoge1xuXHRcdHNvcnROYW1lOiBmdW5jdGlvbiBzb3J0TmFtZShzb3J0X2lkKSB7XG5cdFx0XHR2YXIgcyA9IFwiXCI7XG5cdFx0XHR0aGlzLnNvcnQuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRpZiAoc29ydF9pZCA9PSBlLmlkKSB7XG5cdFx0XHRcdFx0cyA9IGUubmFtZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHM7XG5cdFx0fSxcblx0XHRzZWFyY2hUZXh0OiBmdW5jdGlvbiBzZWFyY2hUZXh0KCkge1xuXHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSBudWxsO1xuXHRcdFx0dGhpcy5jb250ZW50VmlldyA9IFwibGlzdFwiO1xuXHRcdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19qc19kYXRhX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uZ2V0VGV4dCh0aGlzLnRleHQsIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fanNfcGFnZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLCB7IHNvcnRfaWQ6IHRoaXMuc2VsZWN0ZWRTb3J0SWQsIHRpdGxlOiB0aGlzLnNlYXJjaFRpdGxlIH0pO1xuXHRcdFx0Y29uc29sZS5sb2coKTtcblx0XHRcdGlmIChqUXVlcnkoXCIucGFnZVwiKS5zY3JvbGxUb3AoKSA+IDI1MCkge1xuXHRcdFx0XHQkKFwiLnBhZ2VcIikuc2Nyb2xsVG9wKDI1MCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRyZWFkVGV4dDogZnVuY3Rpb24gcmVhZFRleHQodGV4dCkge1xuXHRcdFx0dGhpcy5jb250ZW50VmlldyA9IFwidGV4dFwiO1xuXHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSB0ZXh0O1xuXHRcdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19qc19kYXRhX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10ucmVhZFRleHQodGV4dC5pZCk7XG5cdFx0fVxuXHR9XG59KTtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cbnZhciBjb2xvclRoZW1lID0ge1xuICAgIENPT0tJRV9USEVNRTogJ2NvbG9yLXRoZW1lJyxcbiAgICAkY29sb3JJdGVtczogJCgnLmNvbG9yLXRoZW1lcyA+IGxpJyksXG4gICAgY29sb3JzOiB7XG4gICAgICAgIGRlZmF1bHQ6ICdtYWluLWRlZmF1bHQnLFxuICAgICAgICBjeWFuOiAnbWFpbi1jeWFuJyxcbiAgICAgICAgZ3JlZW46ICdtYWluLWdyZWVuJyxcbiAgICAgICAgcmVkOiAnbWFpbi1yZWQnLFxuICAgICAgICB5ZWxsb3c6ICdtYWluLXllbGxvdycsXG4gICAgICAgIGJsdWU6ICdtYWluLWJsdWUnXG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuY3VyQ29va2llVGhlbWUoKTtcbiAgICAgICAgc2VsZi4kY29sb3JJdGVtcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIGN1ckVsZW1lbnQgPSAkKHRoaXMpLmRhdGEoJ2NvbG9yJyk7XG4gICAgICAgICAgICBzZWxmLnNldFRoZW1lKGN1ckVsZW1lbnQpOyAvL3JlcGxhY2VtZW50IG9mIGNvbG9yIGVsZW1lbnRzXG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VNYXJrZXJGb3JNYXBzKGN1ckVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5yZXBsYWNlSW1hZ2VzKGN1ckVsZW1lbnQpOyAvL3JlcGxhY2VtZW50IHBpY3R1cmVzIGZvciBzdHlsZVxuICAgICAgICB9KTtcblxuICAgICAgICAkKCdbZGF0YS1yZXNldF0nKS5vbigncmVzZXRDb2xvcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldFRoZW1lKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VNYXJrZXJGb3JNYXBzKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VJbWFnZXMoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY29va2llX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uc2V0KHNlbGYuQ09PS0lFX1RIRU1FLCAnZGVmYXVsdCcpO1xuICAgICAgICAgICAgc2VsZi5zZXRBY3RpdmVJdGVtKCdkZWZhdWx0Jyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgY3VyQ29va2llVGhlbWU6IGZ1bmN0aW9uIGN1ckNvb2tpZVRoZW1lKCkge1xuICAgICAgICB2YXIgY3VyQ29va2llVGhlbWUgPSBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmdldCh0aGlzLkNPT0tJRV9USEVNRSk7XG4gICAgICAgIGlmIChjdXJDb29raWVUaGVtZSkge1xuICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXJWMShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgICAgICB0aGlzLnNldFRoZW1lKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyQ29va2llVGhlbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlSW1hZ2VzKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlSXRlbShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTaG93KCk7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlclYxKCdkZWZhdWx0Jyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHByZWxvYWRlclYxOiBmdW5jdGlvbiBwcmVsb2FkZXJWMShjdXJUaCkge1xuICAgICAgICB2YXIgJGNvbG9yVGhlbWVQcmVsb2FkZXIgPSAkKCcuY29sb3ItdGhlbWUtcHJlbG9hZGVyJyk7XG4gICAgICAgIGlmICgkY29sb3JUaGVtZVByZWxvYWRlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBuZXdTcmMgPSB0aGlzLnJlcGxhY2VTcmNGb3JJbWcoY3VyVGgsICRjb2xvclRoZW1lUHJlbG9hZGVyLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIHZhciB0ZW1wSW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB0ZW1wSW1nLnNyYyA9IG5ld1NyYztcbiAgICAgICAgICAgIHRlbXBJbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRjb2xvclRoZW1lUHJlbG9hZGVyLmF0dHIoJ3NyYycsIG5ld1NyYykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldEFjdGl2ZUl0ZW06IGZ1bmN0aW9uIHNldEFjdGl2ZUl0ZW0odGhlbWUpIHtcbiAgICAgICAgdGhpcy4kY29sb3JJdGVtcy5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuJGNvbG9ySXRlbXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdjb2xvcicpID09PSB0aGVtZSkge1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNldFRoZW1lOiBmdW5jdGlvbiBzZXRUaGVtZSh0aGVtZSkge1xuICAgICAgICB2YXIgJGxpbmtUaGVtZSA9ICQoJ2xpbmtbZGF0YS10aGVtZWNvbG9yXScpLFxuICAgICAgICAgICAgY3VyVGhlbWUgPSAkbGlua1RoZW1lLmRhdGEoJ3RoZW1lY29sb3InKSxcbiAgICAgICAgICAgIGF0dHJFbCA9ICRsaW5rVGhlbWUuYXR0cignaHJlZicpO1xuICAgICAgICBpZiAoY3VyVGhlbWUgPT09IHRoZW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXR0ckVsID0gYXR0ckVsLnJlcGxhY2UodGhpcy5jb2xvcnNbY3VyVGhlbWVdICsgJy5jc3MnLCB0aGlzLmNvbG9yc1t0aGVtZV0gKyAnLmNzcycpO1xuICAgICAgICAkbGlua1RoZW1lLmRhdGEoJ3RoZW1lY29sb3InLCB0aGVtZSk7XG4gICAgICAgICRsaW5rVGhlbWUuYXR0cignaHJlZicsIGF0dHJFbCk7XG4gICAgICAgIGlmIChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmdldCh0aGlzLkNPT0tJRV9USEVNRSkgIT09IHRoZW1lKSB7XG4gICAgICAgICAgICBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnNldCh0aGlzLkNPT0tJRV9USEVNRSwgdGhlbWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXBsYWNlU3JjRm9ySW1nOiBmdW5jdGlvbiByZXBsYWNlU3JjRm9ySW1nKHRoZW1lLCBzcmMpIHtcbiAgICAgICAgdmFyIGN1clNyYyA9IHNyYy5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgc3JjVXBkID0gY3VyU3JjW2N1clNyYy5sZW5ndGggLSAyXS5zcGxpdCgnLScpO1xuICAgICAgICBpZiAoc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgIH1cbiAgICAgICAgc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9IHRoZW1lO1xuICAgICAgICBzcmNVcGQgPSBzcmNVcGQuam9pbignLScpO1xuICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICByZXR1cm4gY3VyU3JjLmpvaW4oJy4nKTtcbiAgICB9LFxuICAgIHJlcGxhY2VJbWFnZXM6IGZ1bmN0aW9uIHJlcGxhY2VJbWFnZXModGhlbWUpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJGltZ1RoZW1lID0gJCgnLmNvbG9yLXRoZW1lJyksXG4gICAgICAgICAgICBpbWdUaGVtZU51bSA9ICRpbWdUaGVtZS5sZW5ndGgsXG4gICAgICAgICAgICBjb3VudEltZyA9IDA7XG4gICAgICAgICRpbWdUaGVtZS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHZhciBuZXdTcmMgPSBzZWxmLnJlcGxhY2VTcmNGb3JJbWcodGhlbWUsICQodGhpcykuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgaWYgKCFuZXdTcmMpIHtcbiAgICAgICAgICAgICAgICBjb3VudEltZysrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgbmV3U3JjKTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBuZXdTcmM7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvdW50SW1nKys7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50SW1nID09PSBpbWdUaGVtZU51bSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2VTaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZXBsYWNlTWFya2VyRm9yTWFwczogZnVuY3Rpb24gcmVwbGFjZU1hcmtlckZvck1hcHModGhlbWUpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJG1hcCA9ICQoJy5iLWdvb2dsZS1tYXAubWFwLXRoZW1lJyk7XG4gICAgICAgIGlmICgkbWFwLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHNlbGYucmVwbGFjZVNyY0ZvckltZyh0aGVtZSwgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGlmICghbmV3U3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICAkbWFwLnRyaWdnZXIoJ3JlcGxhY2VfbWFya2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLmNvbG9yLXRoZW1lJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VyU3JjID0gJCh0aGlzKS5hdHRyKCdzcmMnKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIHNyY1VwZCA9IGN1clNyY1tjdXJTcmMubGVuZ3RoIC0gMl0uc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIHZhciBzcmNOZXdUaGVtZTtcbiAgICAgICAgICAgIGlmIChzcmNVcGRbc3JjVXBkLmxlbmd0aCAtIDFdID09PSB0aGVtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNyY1VwZFtzcmNVcGQubGVuZ3RoIC0gMV0gPSB0aGVtZTtcbiAgICAgICAgICAgIHNyY1VwZCA9IHNyY1VwZC5qb2luKCctJyk7XG4gICAgICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICAgICAgc3JjTmV3VGhlbWUgPSBjdXJTcmMuam9pbignLicpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCBzcmNOZXdUaGVtZSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcGFnZVNob3c6IGZ1bmN0aW9uIHBhZ2VTaG93KCkge1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLm1hc2stbCcpLmFuaW1hdGUoeyAnb3BhY2l0eSc6IDAgfSwgODAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfVxuXG59O1xuXG4vLyBjb2xvclRoZW1lLmluaXQoKTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoY29sb3JUaGVtZSk7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xuICAgIHZhciBtYXRjaGVzID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoXCIoPzpefDsgKVwiICsgbmFtZS5yZXBsYWNlKC8oW1xcLiQ/Knx7fVxcKFxcKVxcW1xcXVxcXFxcXC9cXCteXSkvZywgJ1xcXFwkMScpICsgXCI9KFteO10qKVwiKSk7XG4gICAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIHNldENvb2tpZShuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdmFyIGV4cGlyZXMgPSBvcHRpb25zLmV4cGlyZXM7XG5cbiAgICBpZiAodHlwZW9mIGV4cGlyZXMgPT0gXCJudW1iZXJcIiAmJiBleHBpcmVzKSB7XG4gICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgZXhwaXJlcyAqIDEwMDApO1xuICAgICAgICBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzID0gZDtcbiAgICB9XG4gICAgaWYgKGV4cGlyZXMgJiYgZXhwaXJlcy50b1VUQ1N0cmluZykge1xuICAgICAgICBvcHRpb25zLmV4cGlyZXMgPSBleHBpcmVzLnRvVVRDU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXG4gICAgdmFyIHVwZGF0ZWRDb29raWUgPSBuYW1lICsgXCI9XCIgKyB2YWx1ZTtcblxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgdXBkYXRlZENvb2tpZSArPSBcIjsgXCIgKyBwcm9wTmFtZTtcbiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IG9wdGlvbnNbcHJvcE5hbWVdO1xuICAgICAgICBpZiAocHJvcFZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB1cGRhdGVkQ29va2llICs9IFwiPVwiICsgcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuY29va2llID0gdXBkYXRlZENvb2tpZTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlQ29va2llKG5hbWUpIHtcbiAgICBzZXRDb29raWUobmFtZSwgXCJcIiwgeyBleHBpcmVzOiAtMSB9KTtcbn1cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoe1xuICAgIGdldDogZ2V0Q29va2llLFxuICAgIHNldDogc2V0Q29va2llLFxuICAgIGRlbDogZGVsZXRlQ29va2llXG59KTtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NvbW1vbl9hamF4X2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cbmZ1bmN0aW9uIERhdGEoKSB7XG5cdHRoaXMuYXBpID0ge1xuXHRcdHNvcnQ6IFwiYWRtaW4vc29ydC9xdWVyeS5hcGlcIixcblx0XHR0ZXh0OiBcImFkbWluL3RleHQvcXVlcnkuYXBpXCIsXG5cdFx0cmVhZDogXCJhZG1pbi90ZXh0L3JlYWQuYXBpXCJcblx0fTtcblxuXHREYXRhLnByb3RvdHlwZS5nZXRTb3J0ID0gZnVuY3Rpb24gKHZhbHMpIHtcblx0XHRPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jb21tb25fYWpheF9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSh7XG5cdFx0XHR1cmw6IHRoaXMuYXBpLnNvcnQsXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcblx0XHRcdFx0dmFscy5zcGxpY2UoMCwgdmFscy5sZW5ndGgpO1xuXHRcdFx0XHRkYXRhLnZhbHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdHZhbHMucHVzaChlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YS5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICh2YWxzLCBwYWdlLCBvcHRpb24pIHtcblx0XHRpZiAob3B0aW9uLnNvcnRfaWQgPT0gLTEpIHtcblx0XHRcdG9wdGlvbi5zb3J0X2lkID0gJyc7XG5cdFx0fVxuXHRcdG9wdGlvbi5wYWdlID0gcGFnZS5jdXJyUGFnZTtcblx0XHRvcHRpb24ucGFnZVNpemUgPSBwYWdlLnBhZ2VTaXplO1xuXHRcdE9iamVjdChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2NvbW1vbl9hamF4X2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHtcblx0XHRcdHVybDogdGhpcy5hcGkudGV4dCxcblx0XHRcdGRhdGE6IG9wdGlvbixcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHR2YWxzLnNwbGljZSgwLCB2YWxzLmxlbmd0aCk7XG5cdFx0XHRcdGRhdGEudmFscy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0dmFscy5wdXNoKGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cGFnZS50b3RhbENvdW50ID0gZGF0YS5jb3VudDtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhLnByb3RvdHlwZS5yZWFkVGV4dCA9IGZ1bmN0aW9uICh0ZXh0SWQpIHtcblx0XHRPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jb21tb25fYWpheF9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSh7XG5cdFx0XHR1cmw6IHRoaXMuYXBpLnJlYWQsXG5cdFx0XHRkYXRhOiB7IGlkOiB0ZXh0SWQsIHR5cGU6IFwiaHRtbFwiIH0sXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkYXRhLnZhbDtcblx0XHRcdFx0Y29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcIjxwPuKAlHN1bW1hcnnigJQ8YnI+XCIsIFwiPGJsb2NrcXVvdGU+PHA+XCIpLnJlcGxhY2UoXCLigJRzdW1tYXJ54oCUPC9wPlwiLCBcIjwvcD48L2Jsb2NrcXVvdGU+XCIpO1xuXHRcdFx0XHQvLyBtYXJrZWQuc2V0T3B0aW9ucyh7XG5cdFx0XHRcdC8vIFx0aGlnaGxpZ2h0OiBmdW5jdGlvbiAoY29kZSkge1xuXHRcdFx0XHQvLyBcdFx0cmV0dXJuIGhsanMuaGlnaGxpZ2h0QXV0byhjb2RlKS52YWx1ZTtcblx0XHRcdFx0Ly8gXHR9XG5cdFx0XHRcdC8vIH0pO1xuXG5cdFx0XHRcdC8vIHZhciBodG1sID0gbWFya2VkKGNvbnRlbnQpO1xuXHRcdFx0XHQvLyBodG1sID0gaHRtbC5yZXBsYWNlKC8mYW1wO2x0Oy9nLFwiJmx0O1wiKS5yZXBsYWNlKC8mYW1wO2d0Oy9nLFwiJmd0O1wiKVxuXHRcdFx0XHQkKFwiI3RleHRDb250ZW50XCIpLmh0bWwoY29udGVudCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG59XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAobmV3IERhdGEoKSk7XG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcGFnZSA9IHtcblx0Y3VyclBhZ2U6IDEsXG5cdHBhZ2VTaXplOiA1LFxuXHR0b3RhbENvdW50OiAwLFxuXHR0b3RhbFBhZ2U6IDBcbn07XG5cbnZhciB0ZW1wID0ge307XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYWdlLCAndG90YWxDb3VudCcsIHtcblx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0cmV0dXJuIHRlbXAudG90YWxDb3VudDtcblx0fSxcblx0c2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdFx0dGVtcC50b3RhbENvdW50ID0gdmFsO1xuXHRcdHBhZ2UudG90YWxQYWdlID0gcGFyc2VJbnQodmFsIC8gcGFnZS5wYWdlU2l6ZSkgKyAodmFsICUgcGFnZS5wYWdlU2l6ZSA+IDAgPyAxIDogMCk7XG5cdFx0Y29uc29sZS5sb2cocGFnZSk7XG5cdH1cbn0pO1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKHBhZ2UpO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9kaXN0L1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA2MmZjZjdhMzgxNTRlYmM4ZjI5MSIsIlxyXG4vKlxyXG5cdGpzb27kuK3nmoTlj4LmlbBcclxuXHR1cmw66K+35rGC5Zyw5Z2ALCBcdOS4jeiDveS4uuepulxyXG5cdGRhdGE65Y+C5pWwICAgICAgXHTlj6/ku6XkuLrnqbpcclxuXHRzdWNjZXNzOuaIkOWKn+eahOWbnuiwg+WHveaVsCDlj6/ku6XkuLrnqbogXHJcblx0ZXJyb3I6IOWksei0peeahOWbnuiwg+WHveaVsCDlj6/ku6XkuLrnqbpcclxuXHRsb2FkaW5nOiDmmK/lkKbpmpDol4/liqDovb3liqjnlLsg5Y+v5Lul5Li656m6XHTpu5jorqTmmL7npLogdHJ1ZS9mYWxzZVxyXG5cdGFsZXJ0OiDmmK/lkKbpmpDol4/plJnor6/mj5DnpLog5Y+v5Lul5Li656m6IOm7mOiupOaPkOekuiB0cnVlL2ZhbHNlXHJcblx0ICAgICAgICAgICAgXHJcblx0Ly/mqKHmnb9cclxuXHRhamF4KHtcclxuXHRcdHVybDpcIlwiLFxyXG5cdFx0ZGF0YTpkYXRhLFxyXG5cdFx0c3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuXHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG4qL1xyXG5cclxuXHJcblxyXG5cclxuLy8gdmFyIGxvYWRpbmcgPSByZXF1aXJlKCcuL2xvYWRpbmcuanMnKTtcclxuXHJcbmltcG9ydCBsb2FkaW5nIGZyb20gJy4vbG9hZGluZy5qcyc7XHJcbmV4cG9ydCBkZWZhdWx0ICBmdW5jdGlvbihqc29uKXtcclxuXHRpZiAodHlwZW9mIGpzb24uZGF0YSA9PSBcInVuZGVmaW5lZFwiKSB7anNvbi5kYXRhID0ge307fVxyXG5cclxuXHRpZiAoZmFsc2UgIT0ganNvbi5sb2FkaW5nKSB7XHJcblx0XHRsb2FkaW5nLnNob3coKTtcclxuXHR9XHJcblx0dmFyIGFqYXggPSAkLmFqYXgoeyAgICBcclxuXHRcdHVybDpcImh0dHA6Ly9ndW14LnRvcDo5MC9cIitqc29uLnVybCxcclxuXHRcdGRhdGE6anNvbi5kYXRhLFxyXG5cdFx0dHlwZToncG9zdCcsXHJcblx0XHRjYWNoZTpmYWxzZSwgICAgXHJcblx0XHRkYXRhVHlwZTonanNvbicsICAgIFxyXG5cdFx0c3VjY2VzczpmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmxvYWRpbmcpIHtcclxuXHRcdFx0XHRsb2FkaW5nLmhpZGUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGRhdGEuZXJyQ29kZSA9PSAwKSB7XHJcblx0XHRcdFx0aWYgKHR5cGVvZiBqc29uLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKXtcclxuXHRcdFx0XHRcdGpzb24uc3VjY2VzcyhkYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmFsZXJ0ICYmIHR5cGVvZiBkYXRhLmVyck1zZyAhPSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0XHRsYXllci5hbGVydChkYXRhLmVyck1zZywge3RpdGxlIDon6K2m5ZGKJyxpY29uOiAyLHNjcm9sbGJhcjogZmFsc2V9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICh0eXBlb2YganNvbi5lcnJvciA9PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdFx0XHRcdGpzb24uZXJyb3IoZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LCAgICBcclxuXHRcdGVycm9yIDogZnVuY3Rpb24oWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XHJcblx0XHRcdGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXMgPT0gMjAwKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIndlYl91c2VyX3BhZ2VfbG9naW4uZG9cIjtcclxuXHRcdFx0XHR9LDUwMClcclxuXHRcdFx0fWVsc2V7XHJcblxyXG5cdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmxvYWRpbmcpIHtcclxuXHRcdFx0XHRcdGxvYWRpbmcuaGlkZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoZXJyb3JUaHJvd24gIT0gXCJhYm9ydFwiICkge1xyXG5cdFx0XHRcdFx0aWYgKGZhbHNlICE9IGpzb24uYWxlcnQpIHtcclxuXHRcdFx0XHRcdFx0bGF5ZXIuYWxlcnQoJ+ezu+e7n+mUmeivr++8iOmTvuaOpeS4reaWre+8ie+8gScsIHt0aXRsZSA6J+itpuWRiicsaWNvbjogMixzY3JvbGxiYXI6IGZhbHNlfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGpzb24uZXJyb3IgPT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRcdFx0XHRcdGpzb24uZXJyb3IoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRjb21wbGV0ZTpmdW5jdGlvbihYSFIsVFMpe1xyXG5cdFx0XHRpZiAodHlwZW9mIGpzb24uY29tcGxldGUgPT0gXCJmdW5jdGlvblwiKXtcclxuXHRcdFx0XHRqc29uLmNvbXBsZXRlKFRTKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuICAgIHJldHVybiBhamF4O1xyXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbW1vbi9hamF4LmpzIiwiZnVuY3Rpb24gTG9hZGluZygpe31cclxuTG9hZGluZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCl7XHJcblx0JChcIiNsb2FkaW5nXCIpLnNob3coKTtcclxufVxyXG5cclxuTG9hZGluZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCl7XHJcblx0JChcIiNsb2FkaW5nXCIpLmhpZGUoKTtcclxufVxyXG52YXIgbG9hZGluZyA9IG5ldyBMb2FkaW5nO1xyXG5leHBvcnQgZGVmYXVsdCBsb2FkaW5nO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21tb24vbG9hZGluZy5qcyIsImltcG9ydCB0aGVtZSBmcm9tICcuL2pzL2NvbG9yLXRoZW1lcy5qcyc7XHJcbmltcG9ydCBkYXRhIGZyb20gJy4vanMvZGF0YS5qcyc7XHJcbmltcG9ydCBwYWdlIGZyb20gJy4vanMvcGFnZS5qcydcclxuXHJcblxyXG52YXIgYXBwID0gbmV3IFZ1ZSh7XHJcblx0ZWw6XCIubC1tYWluLWNvbnRhaW5lclwiLFxyXG5cdGRhdGE6e1xyXG5cdFx0c29ydDpbXSxcclxuXHRcdHRleHQ6W10sXHJcblx0XHRjb250ZW50VmlldzpcImxpc3RcIiwgLy90ZXh0L2xpc3RcclxuXHRcdHNlYXJjaFRpdGxlOlwiXCIsXHJcblx0XHRzZWxlY3RlZFNvcnRJZDotMSxcclxuXHRcdHNlbGVjdGVkVGV4dDpudWxsLFxyXG5cdFx0cGFnZTpwYWdlLFxyXG5cdH0sXHJcblx0bW91bnRlZDpmdW5jdGlvbigpe1xyXG5cdFx0dGhlbWUuaW5pdCgpO1xyXG5cdH0sXHJcblx0Y3JlYXRlZDpmdW5jdGlvbigpe1xyXG5cdFx0ZGF0YS5nZXRTb3J0KHRoaXMuc29ydCk7XHJcblx0XHRkYXRhLmdldFRleHQodGhpcy50ZXh0LHBhZ2Use30pO1xyXG5cdH0sXHJcblx0Y29tcHV0ZWQ6e1xyXG5cdFx0c2VsZWN0ZWRTb3J0OmZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBzID0ge2lkOi0xLG5hbWU6XCLlhajpg6hcIn07XHJcblx0XHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHRcdFx0dGhpcy5zb3J0LmZvckVhY2goZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0aWYgKHRoYXQuc2VsZWN0ZWRTb3J0SWQgPT0gZS5pZCkge1xyXG5cdFx0XHRcdFx0cyA9IGU7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHM7XHJcblx0XHR9LFxyXG5cdH0sXHJcblx0d2F0Y2g6e1xyXG5cdFx0c2VsZWN0ZWRTb3J0SWQ6ZnVuY3Rpb24gKG52KSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoVGV4dCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0bWV0aG9kczp7XHJcblx0XHRzb3J0TmFtZTpmdW5jdGlvbihzb3J0X2lkKXtcclxuXHRcdFx0dmFyIHMgPSBcIlwiO1xyXG5cdFx0XHR0aGlzLnNvcnQuZm9yRWFjaChmdW5jdGlvbihlKXtcclxuXHRcdFx0XHRpZiAoc29ydF9pZCA9PSBlLmlkKSB7XHJcblx0XHRcdFx0XHRzID0gZS5uYW1lO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBzO1xyXG5cdFx0fSxcclxuXHRcdHNlYXJjaFRleHQ6ZnVuY3Rpb24oKXtcclxuXHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSBudWxsO1xyXG5cdFx0XHR0aGlzLmNvbnRlbnRWaWV3ID0gXCJsaXN0XCI7XHJcblx0XHRcdGRhdGEuZ2V0VGV4dCh0aGlzLnRleHQscGFnZSx7c29ydF9pZDp0aGlzLnNlbGVjdGVkU29ydElkLHRpdGxlOnRoaXMuc2VhcmNoVGl0bGV9KTtcclxuXHRcdFx0Y29uc29sZS5sb2coKTtcclxuXHRcdFx0aWYgKGpRdWVyeShcIi5wYWdlXCIpLnNjcm9sbFRvcCgpID4gMjUwKSB7JChcIi5wYWdlXCIpLnNjcm9sbFRvcCgyNTApO31cclxuXHRcdFx0XHJcblx0XHR9LFxyXG5cdFx0cmVhZFRleHQ6ZnVuY3Rpb24odGV4dCl7XHJcblx0XHRcdHRoaXMuY29udGVudFZpZXcgPSBcInRleHRcIjtcclxuXHRcdFx0dGhpcy5zZWxlY3RlZFRleHQgPSB0ZXh0O1xyXG5cdFx0XHRkYXRhLnJlYWRUZXh0KHRleHQuaWQpO1xyXG5cdFx0fSxcclxuXHR9LFxyXG59KVxyXG5cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93ZWIvYXBwLmpzIiwiaW1wb3J0IGNvb2tpZSBmcm9tICcuL2Nvb2tpZS5qcydcbnZhciBjb2xvclRoZW1lID0ge1xuICAgIENPT0tJRV9USEVNRTogJ2NvbG9yLXRoZW1lJyxcbiAgICAkY29sb3JJdGVtczogJCgnLmNvbG9yLXRoZW1lcyA+IGxpJyksXG4gICAgY29sb3JzOiB7XG4gICAgICAgIGRlZmF1bHQ6ICdtYWluLWRlZmF1bHQnLFxuICAgICAgICBjeWFuOiAnbWFpbi1jeWFuJyxcbiAgICAgICAgZ3JlZW46ICdtYWluLWdyZWVuJyxcbiAgICAgICAgcmVkOiAnbWFpbi1yZWQnLFxuICAgICAgICB5ZWxsb3c6ICdtYWluLXllbGxvdycsXG4gICAgICAgIGJsdWU6ICdtYWluLWJsdWUnXG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuY3VyQ29va2llVGhlbWUoKTtcbiAgICAgICAgc2VsZi4kY29sb3JJdGVtcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIGN1ckVsZW1lbnQgPSAkKHRoaXMpLmRhdGEoJ2NvbG9yJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXRUaGVtZShjdXJFbGVtZW50KTsgLy9yZXBsYWNlbWVudCBvZiBjb2xvciBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHNlbGYucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXBsYWNlSW1hZ2VzKGN1ckVsZW1lbnQpOy8vcmVwbGFjZW1lbnQgcGljdHVyZXMgZm9yIHN0eWxlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkKCdbZGF0YS1yZXNldF0nKS5vbigncmVzZXRDb2xvcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldFRoZW1lKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VNYXJrZXJGb3JNYXBzKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VJbWFnZXMoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoc2VsZi5DT09LSUVfVEhFTUUsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZUl0ZW0oJ2RlZmF1bHQnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjdXJDb29raWVUaGVtZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGN1ckNvb2tpZVRoZW1lID0gY29va2llLmdldCh0aGlzLkNPT0tJRV9USEVNRSk7XG4gICAgICAgIGlmIChjdXJDb29raWVUaGVtZSkge1xuICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXJWMShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgICAgICB0aGlzLnNldFRoZW1lKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyQ29va2llVGhlbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlSW1hZ2VzKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlSXRlbShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTaG93KCk7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlclYxKCdkZWZhdWx0Jyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHByZWxvYWRlclYxOiBmdW5jdGlvbihjdXJUaCl7XG4gICAgICAgIHZhciAkY29sb3JUaGVtZVByZWxvYWRlciA9ICQoJy5jb2xvci10aGVtZS1wcmVsb2FkZXInKTtcbiAgICAgICAgaWYgKCRjb2xvclRoZW1lUHJlbG9hZGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHRoaXMucmVwbGFjZVNyY0ZvckltZyhjdXJUaCwgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgdmFyIHRlbXBJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHRlbXBJbWcuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGVtcEltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJywgbmV3U3JjKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0QWN0aXZlSXRlbTogZnVuY3Rpb24odGhlbWUpe1xuICAgICAgICB0aGlzLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kY29sb3JJdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2NvbG9yJykgPT09IHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0VGhlbWU6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyICRsaW5rVGhlbWUgPSAkKCdsaW5rW2RhdGEtdGhlbWVjb2xvcl0nKSxcbiAgICAgICAgY3VyVGhlbWUgPSAkbGlua1RoZW1lLmRhdGEoJ3RoZW1lY29sb3InKSxcbiAgICAgICAgYXR0ckVsID0gJGxpbmtUaGVtZS5hdHRyKCdocmVmJyk7XG4gICAgICAgIGlmIChjdXJUaGVtZSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhdHRyRWwgPSBhdHRyRWwucmVwbGFjZSh0aGlzLmNvbG9yc1tjdXJUaGVtZV0gKyAnLmNzcycsIHRoaXMuY29sb3JzW3RoZW1lXSArICcuY3NzJyk7XG4gICAgICAgICRsaW5rVGhlbWUuZGF0YSgndGhlbWVjb2xvcicsIHRoZW1lKTtcbiAgICAgICAgJGxpbmtUaGVtZS5hdHRyKCdocmVmJywgYXR0ckVsKTtcbiAgICAgICAgaWYgKGNvb2tpZS5nZXQodGhpcy5DT09LSUVfVEhFTUUpICE9PSB0aGVtZSkge1xuICAgICAgICAgICAgY29va2llLnNldCh0aGlzLkNPT0tJRV9USEVNRSwgdGhlbWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXBsYWNlU3JjRm9ySW1nOiBmdW5jdGlvbih0aGVtZSwgc3JjKXtcbiAgICAgICAgdmFyIGN1clNyYyA9IHNyYy5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgc3JjVXBkID0gY3VyU3JjW2N1clNyYy5sZW5ndGggLSAyXS5zcGxpdCgnLScpO1xuICAgICAgICBpZiAoc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgIH1cbiAgICAgICAgc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9IHRoZW1lO1xuICAgICAgICBzcmNVcGQgPSBzcmNVcGQuam9pbignLScpO1xuICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICByZXR1cm4gY3VyU3JjLmpvaW4oJy4nKTtcbiAgICB9LFxuICAgIHJlcGxhY2VJbWFnZXM6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJGltZ1RoZW1lID0gJCgnLmNvbG9yLXRoZW1lJyksXG4gICAgICAgIGltZ1RoZW1lTnVtID0gJGltZ1RoZW1lLmxlbmd0aCxcbiAgICAgICAgY291bnRJbWcgPSAwO1xuICAgICAgICAkaW1nVGhlbWUuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB2YXIgbmV3U3JjID0gc2VsZi5yZXBsYWNlU3JjRm9ySW1nKHRoZW1lLCAkKHRoaXMpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGlmICghbmV3U3JjKSB7XG4gICAgICAgICAgICAgICAgY291bnRJbWcrKztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICBpbWcuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb3VudEltZysrO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudEltZyA9PT0gaW1nVGhlbWVOdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlU2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVwbGFjZU1hcmtlckZvck1hcHM6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJG1hcCA9ICQoJy5iLWdvb2dsZS1tYXAubWFwLXRoZW1lJyk7XG4gICAgICAgIGlmICgkbWFwLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHNlbGYucmVwbGFjZVNyY0ZvckltZyh0aGVtZSwgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGlmICghbmV3U3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICAkbWFwLnRyaWdnZXIoJ3JlcGxhY2VfbWFya2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLmNvbG9yLXRoZW1lJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VyU3JjID0gJCh0aGlzKS5hdHRyKCdzcmMnKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIHNyY1VwZCA9IGN1clNyY1tjdXJTcmMubGVuZ3RoIC0gMl0uc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIHZhciBzcmNOZXdUaGVtZTtcbiAgICAgICAgICAgIGlmIChzcmNVcGRbc3JjVXBkLmxlbmd0aCAtIDFdID09PSB0aGVtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNyY1VwZFtzcmNVcGQubGVuZ3RoIC0gMV0gPSB0aGVtZTtcbiAgICAgICAgICAgIHNyY1VwZCA9IHNyY1VwZC5qb2luKCctJyk7XG4gICAgICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICAgICAgc3JjTmV3VGhlbWUgPSBjdXJTcmMuam9pbignLicpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCBzcmNOZXdUaGVtZSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcGFnZVNob3c6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcubWFzay1sJykuYW5pbWF0ZSh7J29wYWNpdHknOiAwfSwgODAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfVxuXG59O1xuXG4vLyBjb2xvclRoZW1lLmluaXQoKTtcbmV4cG9ydCBkZWZhdWx0IGNvbG9yVGhlbWU7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dlYi9qcy9jb2xvci10aGVtZXMuanMiLCJmdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xuICAgIHZhciBtYXRjaGVzID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoXG4gICAgICAgICAgICBcIig/Ol58OyApXCIgKyBuYW1lLnJlcGxhY2UoLyhbXFwuJD8qfHt9XFwoXFwpXFxbXFxdXFxcXFxcL1xcK15dKS9nLCAnXFxcXCQxJykgKyBcIj0oW147XSopXCJcbiAgICApKTtcbiAgICByZXR1cm4gbWF0Y2hlcyA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaGVzWzFdKSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gc2V0Q29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB2YXIgZXhwaXJlcyA9IG9wdGlvbnMuZXhwaXJlcztcblxuICAgIGlmICh0eXBlb2YgZXhwaXJlcyA9PSBcIm51bWJlclwiICYmIGV4cGlyZXMpIHtcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyBleHBpcmVzICogMTAwMCk7XG4gICAgICAgIGV4cGlyZXMgPSBvcHRpb25zLmV4cGlyZXMgPSBkO1xuICAgIH1cbiAgICBpZiAoZXhwaXJlcyAmJiBleHBpcmVzLnRvVVRDU3RyaW5nKSB7XG4gICAgICAgIG9wdGlvbnMuZXhwaXJlcyA9IGV4cGlyZXMudG9VVENTdHJpbmcoKTtcbiAgICB9XG5cbiAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG5cbiAgICB2YXIgdXBkYXRlZENvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlO1xuXG4gICAgZm9yKHZhciBwcm9wTmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIHVwZGF0ZWRDb29raWUgKz0gXCI7IFwiICsgcHJvcE5hbWU7XG4gICAgICAgIHZhciBwcm9wVmFsdWUgPSBvcHRpb25zW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdXBkYXRlZENvb2tpZSArPSBcIj1cIiArIHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmNvb2tpZSA9IHVwZGF0ZWRDb29raWU7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNvb2tpZShuYW1lKSB7XG4gICAgc2V0Q29va2llKG5hbWUsIFwiXCIsIHsgZXhwaXJlczogLTEgfSlcbn1cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnZXQ6Z2V0Q29va2llLFxuICAgIHNldDpzZXRDb29raWUsXG4gICAgZGVsOmRlbGV0ZUNvb2tpZSxcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvd2ViL2pzL2Nvb2tpZS5qcyIsImltcG9ydCBhamF4IGZyb20gJy4uLy4uL2NvbW1vbi9hamF4LmpzJztcclxuXHJcblxyXG5mdW5jdGlvbiBEYXRhKCl7XHJcblx0dGhpcy5hcGkgPSB7XHJcblx0XHRzb3J0OlwiYWRtaW4vc29ydC9xdWVyeS5hcGlcIixcclxuXHRcdHRleHQ6XCJhZG1pbi90ZXh0L3F1ZXJ5LmFwaVwiLFxyXG5cdFx0cmVhZDpcImFkbWluL3RleHQvcmVhZC5hcGlcIixcclxuXHR9O1xyXG5cclxuXHREYXRhLnByb3RvdHlwZS5nZXRTb3J0ID0gZnVuY3Rpb24odmFscyl7XHJcblx0XHRhamF4KHtcclxuXHRcdFx0dXJsOnRoaXMuYXBpLnNvcnQsXHJcblx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0dmFscy5zcGxpY2UoMCx2YWxzLmxlbmd0aCk7XHJcblx0XHRcdFx0ZGF0YS52YWxzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFscy5wdXNoKGUpfSk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHREYXRhLnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24odmFscyxwYWdlLG9wdGlvbil7XHJcblx0XHRpZiAob3B0aW9uLnNvcnRfaWQ9PS0xKSB7b3B0aW9uLnNvcnRfaWQ9Jyc7fVxyXG5cdFx0b3B0aW9uLnBhZ2UgPSBwYWdlLmN1cnJQYWdlO1xyXG5cdFx0b3B0aW9uLnBhZ2VTaXplID0gcGFnZS5wYWdlU2l6ZTtcclxuXHRcdGFqYXgoe1xyXG5cdFx0XHR1cmw6dGhpcy5hcGkudGV4dCxcclxuXHRcdFx0ZGF0YTpvcHRpb24sXHJcblx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0dmFscy5zcGxpY2UoMCx2YWxzLmxlbmd0aCk7XHJcblx0XHRcdFx0ZGF0YS52YWxzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFscy5wdXNoKGUpfSk7XHJcblx0XHRcdFx0cGFnZS50b3RhbENvdW50ID0gZGF0YS5jb3VudDtcdFx0XHRcdFxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH1cclxuXHJcblx0RGF0YS5wcm90b3R5cGUucmVhZFRleHQgPSBmdW5jdGlvbih0ZXh0SWQpe1xyXG5cdFx0YWpheCh7XHJcblx0XHRcdHVybDp0aGlzLmFwaS5yZWFkLFxyXG5cdFx0XHRkYXRhOntpZDp0ZXh0SWQsdHlwZTpcImh0bWxcIn0sXHJcblx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkYXRhLnZhbDtcclxuXHRcdFx0XHRjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFwiPHA+4oCUc3VtbWFyeeKAlDxicj5cIixcIjxibG9ja3F1b3RlPjxwPlwiKS5yZXBsYWNlKFwi4oCUc3VtbWFyeeKAlDwvcD5cIixcIjwvcD48L2Jsb2NrcXVvdGU+XCIpO1xyXG5cdFx0XHRcdC8vIG1hcmtlZC5zZXRPcHRpb25zKHtcclxuXHRcdFx0XHQvLyBcdGhpZ2hsaWdodDogZnVuY3Rpb24gKGNvZGUpIHtcclxuXHRcdFx0XHQvLyBcdFx0cmV0dXJuIGhsanMuaGlnaGxpZ2h0QXV0byhjb2RlKS52YWx1ZTtcclxuXHRcdFx0XHQvLyBcdH1cclxuXHRcdFx0XHQvLyB9KTtcclxuXHJcblx0XHRcdFx0Ly8gdmFyIGh0bWwgPSBtYXJrZWQoY29udGVudCk7XHJcblx0XHRcdFx0Ly8gaHRtbCA9IGh0bWwucmVwbGFjZSgvJmFtcDtsdDsvZyxcIiZsdDtcIikucmVwbGFjZSgvJmFtcDtndDsvZyxcIiZndDtcIilcclxuXHRcdFx0XHQkKFwiI3RleHRDb250ZW50XCIpLmh0bWwoY29udGVudCk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IERhdGEoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvd2ViL2pzL2RhdGEuanMiLCJ2YXIgcGFnZSA9IHtcclxuXHRjdXJyUGFnZSA6IDEsXHJcblx0cGFnZVNpemUgOiA1LFxyXG5cdHRvdGFsQ291bnQgOiAwLFxyXG5cdHRvdGFsUGFnZSA6IDAsXHJcbn1cclxuXHJcbnZhciB0ZW1wID0ge307XHJcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkocGFnZSwndG90YWxDb3VudCcse1xyXG5cdGdldDpmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIHRlbXAudG90YWxDb3VudDtcclxuXHR9LFxyXG5cdHNldDpmdW5jdGlvbih2YWwpe1xyXG5cdFx0dGVtcC50b3RhbENvdW50ID0gdmFsO1xyXG5cdFx0cGFnZS50b3RhbFBhZ2UgPSBwYXJzZUludCh2YWwgLyBwYWdlLnBhZ2VTaXplKSArICh2YWwgJSBwYWdlLnBhZ2VTaXplID4gMCA/IDEgOiAwKTtcclxuXHRcdGNvbnNvbGUubG9nKHBhZ2UpO1xyXG5cdH1cclxufSk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcGFnZTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvd2ViL2pzL3BhZ2UuanMiXSwic291cmNlUm9vdCI6IiJ9