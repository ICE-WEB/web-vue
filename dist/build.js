!function(t){function e(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),a=r(3),i=r(6);new Vue({el:".l-main-container",data:{sort:[],text:[],contentView:"list",searchTitle:"",selectedSortId:-1,selectedText:null,page:i.a},mounted:function(){o.a.init()},created:function(){a.a.getSort(this.sort),a.a.getText(this.text,i.a,{})},computed:{selectedSort:function(){var t={id:-1,name:"全部"},e=this;return this.sort.forEach(function(r){if(e.selectedSortId==r.id)return void(t=r)}),t}},watch:{selectedSortId:function(t){this.searchText()}},methods:{sortName:function(t){var e="";return this.sort.forEach(function(r){if(t==r.id)return void(e=r.name)}),e},searchText:function(){this.selectedText=null,this.contentView="list",a.a.getText(this.text,i.a,{sort_id:this.selectedSortId,title:this.searchTitle}),console.log(),jQuery(".page").scrollTop()>250&&$(".page").scrollTop(250)},readText:function(t){this.contentView="text",this.selectedText=t,a.a.readText(t.id)}}})},function(t,e,r){"use strict";var o=r(2),a={COOKIE_THEME:"color-theme",$colorItems:$(".color-themes > li"),colors:{default:"main-default",cyan:"main-cyan",green:"main-green",red:"main-red",yellow:"main-yellow",blue:"main-blue"},init:function(){var t=this;t.curCookieTheme(),t.$colorItems.on("click",function(){t.$colorItems.removeClass("is-active"),$(this).addClass("is-active");var e=$(this).data("color");t.setTheme(e),t.replaceMarkerForMaps(e),t.replaceImages(e)}),$("[data-reset]").on("resetColors",function(){t.setTheme("default"),t.replaceMarkerForMaps("default"),t.replaceImages("default"),o.a.set(t.COOKIE_THEME,"default"),t.setActiveItem("default")})},curCookieTheme:function(){var t=o.a.get(this.COOKIE_THEME);t?(this.preloaderV1(t),this.setTheme(t),this.replaceMarkerForMaps(t),this.replaceImages(t),this.setActiveItem(t)):(this.pageShow(),this.preloaderV1("default"))},preloaderV1:function(t){var e=$(".color-theme-preloader");if(e.length){var r=this.replaceSrcForImg(t,e.attr("src")),o=new Image;o.src=r,o.onload=function(){e.attr("src",r).css("visibility","visible")}}},setActiveItem:function(t){this.$colorItems.removeClass("is-active"),this.$colorItems.each(function(){$(this).data("color")===t&&$(this).addClass("is-active")})},setTheme:function(t){var e=$("link[data-themecolor]"),r=e.data("themecolor"),a=e.attr("href");r!==t&&(a=a.replace(this.colors[r]+".css",this.colors[t]+".css"),e.data("themecolor",t),e.attr("href",a),o.a.get(this.COOKIE_THEME)!==t&&o.a.set(this.COOKIE_THEME,t))},replaceSrcForImg:function(t,e){var r=e.split("."),o=r[r.length-2].split("-");return o[o.length-1]===t?e:(o[o.length-1]=t,o=o.join("-"),r[r.length-2]=o,r.join("."))},replaceImages:function(t){var e=this,r=$(".color-theme"),o=r.length,a=0;r.each(function(){var r=new Image,i=e.replaceSrcForImg(t,$(this).attr("src"));if(!i)return void a++;$(this).attr("src",i),r.src=i,r.onload=function(){++a===o&&e.pageShow()}})},replaceMarkerForMaps:function(t){var e=this,r=$(".b-google-map.map-theme");if(r.length>0){var o=e.replaceSrcForImg(t,$(".marker-template").attr("src"));if(!o)return;$(".marker-template").attr("src",o),r.trigger("replace_marker")}$(".color-theme").each(function(){var e,r=$(this).attr("src").split("."),o=r[r.length-2].split("-");o[o.length-1]!==t&&(o[o.length-1]=t,o=o.join("-"),r[r.length-2]=o,e=r.join("."),$(this).attr("src",e))})},pageShow:function(){setTimeout(function(){$(".mask-l").animate({opacity:0},800,function(){$(this).css("display","none")})},400)}};e.a=a},function(t,e,r){"use strict";function o(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function a(t,e,r){r=r||{};var o=r.expires;if("number"==typeof o&&o){var a=new Date;a.setTime(a.getTime()+1e3*o),o=r.expires=a}o&&o.toUTCString&&(r.expires=o.toUTCString()),e=encodeURIComponent(e);var i=t+"="+e;for(var n in r){i+="; "+n;var s=r[n];!0!==s&&(i+="="+s)}document.cookie=i}function i(t){a(t,"",{expires:-1})}e.a={get:o,set:a,del:i}},function(t,e,r){"use strict";function o(){this.baseURL="http://gumx.top:90/admin/",this.api={sort:this.baseURL+"sort/query.api",text:this.baseURL+"text/query.api",read:this.baseURL+"text/read.api"},o.prototype.getSort=function(t){Object(a.a)({url:this.api.sort,success:function(e){t.splice(0,t.length),e.vals.forEach(function(e){t.push(e)})}})},o.prototype.getText=function(t,e,r){-1==r.sort_id&&(r.sort_id=""),r.page=e.currPage,r.pageSize=e.pageSize,Object(a.a)({url:this.api.text,data:r,success:function(r){t.splice(0,t.length),r.vals.forEach(function(e){t.push(e)}),e.totalCount=r.count}})},o.prototype.readText=function(t){Object(a.a)({url:this.api.read,data:{id:t},success:function(t){var e=t.val;e=e.replace("---summary---","> ").replace("---summary---","\n").replace(/&gt;/g,"> "),marked.setOptions({highlight:function(t){return hljs.highlightAuto(t).value}});var r=marked(e);r=r.replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;"),$("#textContent").html(r)}})}}var a=r(4);e.a=new o},function(t,e,r){"use strict";var o=r(5);e.a=function(t){return void 0===t.data&&(t.data={}),0!=t.loading&&o.a.show(),$.ajax({url:t.url,data:t.data,type:"post",cache:!1,dataType:"json",success:function(e){0!=t.loading&&o.a.hide(),0==e.errCode?"function"==typeof t.success&&t.success(e):(0!=t.alert&&void 0!==e.errMsg&&layer.alert(e.errMsg,{title:"警告",icon:2,scrollbar:!1}),"function"==typeof t.error&&t.error(e))},error:function(e,r,a){200==e.status?setTimeout(function(){window.location.href="web_user_page_login.do"},500):(0!=t.loading&&o.a.hide(),"abort"!=a&&(0!=t.alert&&layer.alert("系统错误（链接中断）！",{title:"警告",icon:2,scrollbar:!1}),"function"==typeof t.error&&t.error()))},complete:function(e,r){"function"==typeof t.complete&&t.complete(r)}})}},function(t,e,r){"use strict";function o(){}o.prototype.show=function(){$("#loading").show()},o.prototype.hide=function(){$("#loading").hide()};var a=new o;e.a=a},function(t,e,r){"use strict";var o={currPage:1,pageSize:5,totalCount:0,totalPage:0},a={};Object.defineProperty(o,"totalCount",{get:function(){return a.totalCount},set:function(t){a.totalCount=t,o.totalPage=parseInt(t/o.pageSize)+(t%o.pageSize>0?1:0),console.log(o)}}),e.a=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVpbGQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDIwZGJkNGY0YTUzNmQ2YzU1NzI3Iiwid2VicGFjazovLy8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbG9yLXRoZW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29va2llLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hamF4LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9sb2FkaW5nLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwidmFsdWUiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2pzX2NvbG9yX3RoZW1lc19qc19fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19qc19kYXRhX2pzX18iLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX2pzX3BhZ2VfanNfXyIsIlZ1ZSIsImVsIiwiZGF0YSIsInNvcnQiLCJ0ZXh0IiwiY29udGVudFZpZXciLCJzZWFyY2hUaXRsZSIsInNlbGVjdGVkU29ydElkIiwic2VsZWN0ZWRUZXh0IiwicGFnZSIsIm1vdW50ZWQiLCJpbml0IiwiY3JlYXRlZCIsImdldFNvcnQiLCJ0aGlzIiwiZ2V0VGV4dCIsImNvbXB1dGVkIiwic2VsZWN0ZWRTb3J0IiwiaWQiLCJ0aGF0IiwiZm9yRWFjaCIsImUiLCJ3YXRjaCIsIm52Iiwic2VhcmNoVGV4dCIsIm1ldGhvZHMiLCJzb3J0TmFtZSIsInNvcnRfaWQiLCJ0aXRsZSIsImNvbnNvbGUiLCJsb2ciLCJqUXVlcnkiLCJzY3JvbGxUb3AiLCIkIiwicmVhZFRleHQiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fIiwiY29sb3JUaGVtZSIsIkNPT0tJRV9USEVNRSIsIiRjb2xvckl0ZW1zIiwiY29sb3JzIiwiZGVmYXVsdCIsImN5YW4iLCJncmVlbiIsInJlZCIsInllbGxvdyIsImJsdWUiLCJzZWxmIiwiY3VyQ29va2llVGhlbWUiLCJvbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjdXJFbGVtZW50Iiwic2V0VGhlbWUiLCJyZXBsYWNlTWFya2VyRm9yTWFwcyIsInJlcGxhY2VJbWFnZXMiLCJzZXQiLCJzZXRBY3RpdmVJdGVtIiwicHJlbG9hZGVyVjEiLCJwYWdlU2hvdyIsImN1clRoIiwiJGNvbG9yVGhlbWVQcmVsb2FkZXIiLCJsZW5ndGgiLCJuZXdTcmMiLCJyZXBsYWNlU3JjRm9ySW1nIiwiYXR0ciIsInRlbXBJbWciLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImNzcyIsInRoZW1lIiwiZWFjaCIsIiRsaW5rVGhlbWUiLCJjdXJUaGVtZSIsImF0dHJFbCIsInJlcGxhY2UiLCJjdXJTcmMiLCJzcGxpdCIsInNyY1VwZCIsImpvaW4iLCIkaW1nVGhlbWUiLCJpbWdUaGVtZU51bSIsImNvdW50SW1nIiwiaW1nIiwiJG1hcCIsInRyaWdnZXIiLCJzcmNOZXdUaGVtZSIsInNldFRpbWVvdXQiLCJhbmltYXRlIiwib3BhY2l0eSIsImdldENvb2tpZSIsIm1hdGNoZXMiLCJkb2N1bWVudCIsImNvb2tpZSIsIm1hdGNoIiwiUmVnRXhwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidW5kZWZpbmVkIiwic2V0Q29va2llIiwib3B0aW9ucyIsImV4cGlyZXMiLCJEYXRlIiwic2V0VGltZSIsImdldFRpbWUiLCJ0b1VUQ1N0cmluZyIsImVuY29kZVVSSUNvbXBvbmVudCIsInVwZGF0ZWRDb29raWUiLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImRlbGV0ZUNvb2tpZSIsImRlbCIsIkRhdGEiLCJiYXNlVVJMIiwiYXBpIiwicmVhZCIsInZhbHMiLCJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2FqYXhfanNfXyIsInVybCIsInN1Y2Nlc3MiLCJzcGxpY2UiLCJwdXNoIiwib3B0aW9uIiwiY3VyclBhZ2UiLCJwYWdlU2l6ZSIsInRvdGFsQ291bnQiLCJjb3VudCIsInRleHRJZCIsImNvbnRlbnQiLCJ2YWwiLCJtYXJrZWQiLCJzZXRPcHRpb25zIiwiaGlnaGxpZ2h0IiwiY29kZSIsImhsanMiLCJoaWdobGlnaHRBdXRvIiwiaHRtbCIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fbG9hZGluZ19qc19fIiwianNvbiIsImxvYWRpbmciLCJzaG93IiwiYWpheCIsInR5cGUiLCJjYWNoZSIsImRhdGFUeXBlIiwiaGlkZSIsImVyckNvZGUiLCJhbGVydCIsImVyck1zZyIsImxheWVyIiwiaWNvbiIsInNjcm9sbGJhciIsImVycm9yIiwiWE1MSHR0cFJlcXVlc3QiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJzdGF0dXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb21wbGV0ZSIsIlhIUiIsIlRTIiwiTG9hZGluZyIsInRvdGFsUGFnZSIsInRlbXAiLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFI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QUFZQyxHQUNmLEtBQXpCRixFQUFlRyxPQUNsQnBFLFdBQVcsV0FDVnFFLE9BQU9DLFNBQVNDLEtBQU8sMEJBQ3RCLE1BR0UsR0FBU3JCLEVBQUtDLFNBQ2pCRixFQUFBLEVBQVFRLE9BRVUsU0FBZlUsSUFDQyxHQUFTakIsRUFBS1MsT0FDakJFLE1BQU1GLE1BQU0sZUFBZ0J0SCxNQUFPLEtBQUt5SCxLQUFNLEVBQUVDLFdBQVcsSUFFbkMsa0JBQWRiLEdBQUtjLE9BQ2ZkLEVBQUtjLFdBS1RRLFNBQVMsU0FBU0MsRUFBSUMsR0FDTyxrQkFBakJ4QixHQUFLc0IsVUFDZnRCLEVBQUtzQixTQUFTRSxRTmdiWixTQUFVN0wsRUFBUXVCLEVBQXFCM0IsR0FFN0MsWU9sZ0JBLFNBQVNrTSxNQUNUQSxFQUFRM0ssVUFBVW9KLEtBQU8sV0FDeEIxRyxFQUFFLFlBQVkwRyxRQUdmdUIsRUFBUTNLLFVBQVV5SixLQUFPLFdBQ3hCL0csRUFBRSxZQUFZK0csT0FFZixJQUFJTixHQUFVLEdBQUl3QixFQUNsQnZLLEdBQUEsS1B1Z0JNLFNBQVV2QixFQUFRdUIsRUFBcUIzQixHQUU3QyxZUWxoQkEsSUFBSXlDLElBQ0hpSCxTQUFXLEVBQ1hDLFNBQVcsRUFDWEMsV0FBYSxFQUNidUMsVUFBWSxHQUdUQyxJQUVKdEwsUUFBT0MsZUFBZTBCLEVBQUssY0FDMUJ2QixJQUFJLFdBQ0gsTUFBT2tMLEdBQUt4QyxZQUVickUsSUFBSSxTQUFTeUUsR0FDWm9DLEVBQUt4QyxXQUFhSSxFQUNsQnZILEVBQUswSixVQUFZRSxTQUFTckMsRUFBTXZILEVBQUtrSCxXQUFhSyxFQUFNdkgsRUFBS2tILFNBQVcsRUFBSSxFQUFJLEdBQ2hGOUYsUUFBUUMsSUFBSXJCLE1BS2RkLEVBQUEiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19leHBvcnRzX18sIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fanNfY29sb3JfdGhlbWVzX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX2pzX3BhZ2VfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cblxuXG5cbnZhciBhcHAgPSBuZXcgVnVlKHtcblx0ZWw6IFwiLmwtbWFpbi1jb250YWluZXJcIixcblx0ZGF0YToge1xuXHRcdHNvcnQ6IFtdLFxuXHRcdHRleHQ6IFtdLFxuXHRcdGNvbnRlbnRWaWV3OiBcImxpc3RcIiwgLy90ZXh0L2xpc3Rcblx0XHRzZWFyY2hUaXRsZTogXCJcIixcblx0XHRzZWxlY3RlZFNvcnRJZDogLTEsXG5cdFx0c2VsZWN0ZWRUZXh0OiBudWxsLFxuXHRcdHBhZ2U6IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fanNfcGFnZV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dXG5cdH0sXG5cdG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7XG5cdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19qc19jb2xvcl90aGVtZXNfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5pbml0KCk7XG5cdH0sXG5cdGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdFx0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19qc19kYXRhX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uZ2V0U29ydCh0aGlzLnNvcnQpO1xuXHRcdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmdldFRleHQodGhpcy50ZXh0LCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX2pzX3BhZ2VfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwge30pO1xuXHR9LFxuXHRjb21wdXRlZDoge1xuXHRcdHNlbGVjdGVkU29ydDogZnVuY3Rpb24gc2VsZWN0ZWRTb3J0KCkge1xuXHRcdFx0dmFyIHMgPSB7IGlkOiAtMSwgbmFtZTogXCLlhajpg6hcIiB9O1xuXHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdFx0dGhpcy5zb3J0LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0aWYgKHRoYXQuc2VsZWN0ZWRTb3J0SWQgPT0gZS5pZCkge1xuXHRcdFx0XHRcdHMgPSBlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcztcblx0XHR9XG5cdH0sXG5cdHdhdGNoOiB7XG5cdFx0c2VsZWN0ZWRTb3J0SWQ6IGZ1bmN0aW9uIHNlbGVjdGVkU29ydElkKG52KSB7XG5cdFx0XHR0aGlzLnNlYXJjaFRleHQoKTtcblx0XHR9XG5cdH0sXG5cdG1ldGhvZHM6IHtcblx0XHRzb3J0TmFtZTogZnVuY3Rpb24gc29ydE5hbWUoc29ydF9pZCkge1xuXHRcdFx0dmFyIHMgPSBcIlwiO1xuXHRcdFx0dGhpcy5zb3J0LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0aWYgKHNvcnRfaWQgPT0gZS5pZCkge1xuXHRcdFx0XHRcdHMgPSBlLm5hbWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBzO1xuXHRcdH0sXG5cdFx0c2VhcmNoVGV4dDogZnVuY3Rpb24gc2VhcmNoVGV4dCgpIHtcblx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gbnVsbDtcblx0XHRcdHRoaXMuY29udGVudFZpZXcgPSBcImxpc3RcIjtcblx0XHRcdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLmdldFRleHQodGhpcy50ZXh0LCBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX2pzX3BhZ2VfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXSwgeyBzb3J0X2lkOiB0aGlzLnNlbGVjdGVkU29ydElkLCB0aXRsZTogdGhpcy5zZWFyY2hUaXRsZSB9KTtcblx0XHRcdGNvbnNvbGUubG9nKCk7XG5cdFx0XHRpZiAoalF1ZXJ5KFwiLnBhZ2VcIikuc2Nyb2xsVG9wKCkgPiAyNTApIHtcblx0XHRcdFx0JChcIi5wYWdlXCIpLnNjcm9sbFRvcCgyNTApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVhZFRleHQ6IGZ1bmN0aW9uIHJlYWRUZXh0KHRleHQpIHtcblx0XHRcdHRoaXMuY29udGVudFZpZXcgPSBcInRleHRcIjtcblx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gdGV4dDtcblx0XHRcdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fanNfZGF0YV9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnJlYWRUZXh0KHRleHQuaWQpO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2Nvb2tpZV9qc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIGNvbG9yVGhlbWUgPSB7XG4gICAgQ09PS0lFX1RIRU1FOiAnY29sb3ItdGhlbWUnLFxuICAgICRjb2xvckl0ZW1zOiAkKCcuY29sb3ItdGhlbWVzID4gbGknKSxcbiAgICBjb2xvcnM6IHtcbiAgICAgICAgZGVmYXVsdDogJ21haW4tZGVmYXVsdCcsXG4gICAgICAgIGN5YW46ICdtYWluLWN5YW4nLFxuICAgICAgICBncmVlbjogJ21haW4tZ3JlZW4nLFxuICAgICAgICByZWQ6ICdtYWluLXJlZCcsXG4gICAgICAgIHllbGxvdzogJ21haW4teWVsbG93JyxcbiAgICAgICAgYmx1ZTogJ21haW4tYmx1ZSdcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5jdXJDb29raWVUaGVtZSgpO1xuICAgICAgICBzZWxmLiRjb2xvckl0ZW1zLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuJGNvbG9ySXRlbXMucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB2YXIgY3VyRWxlbWVudCA9ICQodGhpcykuZGF0YSgnY29sb3InKTtcbiAgICAgICAgICAgIHNlbGYuc2V0VGhlbWUoY3VyRWxlbWVudCk7IC8vcmVwbGFjZW1lbnQgb2YgY29sb3IgZWxlbWVudHNcbiAgICAgICAgICAgIHNlbGYucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyRWxlbWVudCk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VJbWFnZXMoY3VyRWxlbWVudCk7IC8vcmVwbGFjZW1lbnQgcGljdHVyZXMgZm9yIHN0eWxlXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJ1tkYXRhLXJlc2V0XScpLm9uKCdyZXNldENvbG9ycycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0VGhlbWUoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIHNlbGYucmVwbGFjZU1hcmtlckZvck1hcHMoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIHNlbGYucmVwbGFjZUltYWdlcygnZGVmYXVsdCcpO1xuICAgICAgICAgICAgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19jb29raWVfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5zZXQoc2VsZi5DT09LSUVfVEhFTUUsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZUl0ZW0oJ2RlZmF1bHQnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjdXJDb29raWVUaGVtZTogZnVuY3Rpb24gY3VyQ29va2llVGhlbWUoKSB7XG4gICAgICAgIHZhciBjdXJDb29raWVUaGVtZSA9IF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY29va2llX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uZ2V0KHRoaXMuQ09PS0lFX1RIRU1FKTtcbiAgICAgICAgaWYgKGN1ckNvb2tpZVRoZW1lKSB7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlclYxKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGhlbWUoY3VyQ29va2llVGhlbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlTWFya2VyRm9yTWFwcyhjdXJDb29raWVUaGVtZSk7XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VJbWFnZXMoY3VyQ29va2llVGhlbWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVJdGVtKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFnZVNob3coKTtcbiAgICAgICAgICAgIHRoaXMucHJlbG9hZGVyVjEoJ2RlZmF1bHQnKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcHJlbG9hZGVyVjE6IGZ1bmN0aW9uIHByZWxvYWRlclYxKGN1clRoKSB7XG4gICAgICAgIHZhciAkY29sb3JUaGVtZVByZWxvYWRlciA9ICQoJy5jb2xvci10aGVtZS1wcmVsb2FkZXInKTtcbiAgICAgICAgaWYgKCRjb2xvclRoZW1lUHJlbG9hZGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHRoaXMucmVwbGFjZVNyY0ZvckltZyhjdXJUaCwgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgdmFyIHRlbXBJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHRlbXBJbWcuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGVtcEltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJywgbmV3U3JjKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0QWN0aXZlSXRlbTogZnVuY3Rpb24gc2V0QWN0aXZlSXRlbSh0aGVtZSkge1xuICAgICAgICB0aGlzLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kY29sb3JJdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2NvbG9yJykgPT09IHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0VGhlbWU6IGZ1bmN0aW9uIHNldFRoZW1lKHRoZW1lKSB7XG4gICAgICAgIHZhciAkbGlua1RoZW1lID0gJCgnbGlua1tkYXRhLXRoZW1lY29sb3JdJyksXG4gICAgICAgICAgICBjdXJUaGVtZSA9ICRsaW5rVGhlbWUuZGF0YSgndGhlbWVjb2xvcicpLFxuICAgICAgICAgICAgYXR0ckVsID0gJGxpbmtUaGVtZS5hdHRyKCdocmVmJyk7XG4gICAgICAgIGlmIChjdXJUaGVtZSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhdHRyRWwgPSBhdHRyRWwucmVwbGFjZSh0aGlzLmNvbG9yc1tjdXJUaGVtZV0gKyAnLmNzcycsIHRoaXMuY29sb3JzW3RoZW1lXSArICcuY3NzJyk7XG4gICAgICAgICRsaW5rVGhlbWUuZGF0YSgndGhlbWVjb2xvcicsIHRoZW1lKTtcbiAgICAgICAgJGxpbmtUaGVtZS5hdHRyKCdocmVmJywgYXR0ckVsKTtcbiAgICAgICAgaWYgKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY29va2llX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uZ2V0KHRoaXMuQ09PS0lFX1RIRU1FKSAhPT0gdGhlbWUpIHtcbiAgICAgICAgICAgIF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fY29va2llX2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10uc2V0KHRoaXMuQ09PS0lFX1RIRU1FLCB0aGVtZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlcGxhY2VTcmNGb3JJbWc6IGZ1bmN0aW9uIHJlcGxhY2VTcmNGb3JJbWcodGhlbWUsIHNyYykge1xuICAgICAgICB2YXIgY3VyU3JjID0gc3JjLnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBzcmNVcGQgPSBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdLnNwbGl0KCctJyk7XG4gICAgICAgIGlmIChzcmNVcGRbc3JjVXBkLmxlbmd0aCAtIDFdID09PSB0aGVtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNyYztcbiAgICAgICAgfVxuICAgICAgICBzcmNVcGRbc3JjVXBkLmxlbmd0aCAtIDFdID0gdGhlbWU7XG4gICAgICAgIHNyY1VwZCA9IHNyY1VwZC5qb2luKCctJyk7XG4gICAgICAgIGN1clNyY1tjdXJTcmMubGVuZ3RoIC0gMl0gPSBzcmNVcGQ7XG4gICAgICAgIHJldHVybiBjdXJTcmMuam9pbignLicpO1xuICAgIH0sXG4gICAgcmVwbGFjZUltYWdlczogZnVuY3Rpb24gcmVwbGFjZUltYWdlcyh0aGVtZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkaW1nVGhlbWUgPSAkKCcuY29sb3ItdGhlbWUnKSxcbiAgICAgICAgICAgIGltZ1RoZW1lTnVtID0gJGltZ1RoZW1lLmxlbmd0aCxcbiAgICAgICAgICAgIGNvdW50SW1nID0gMDtcbiAgICAgICAgJGltZ1RoZW1lLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHNlbGYucmVwbGFjZVNyY0ZvckltZyh0aGVtZSwgJCh0aGlzKS5hdHRyKCdzcmMnKSk7XG4gICAgICAgICAgICBpZiAoIW5ld1NyYykge1xuICAgICAgICAgICAgICAgIGNvdW50SW1nKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCBuZXdTcmMpO1xuICAgICAgICAgICAgaW1nLnNyYyA9IG5ld1NyYztcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY291bnRJbWcrKztcbiAgICAgICAgICAgICAgICBpZiAoY291bnRJbWcgPT09IGltZ1RoZW1lTnVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZVNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHJlcGxhY2VNYXJrZXJGb3JNYXBzOiBmdW5jdGlvbiByZXBsYWNlTWFya2VyRm9yTWFwcyh0aGVtZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciAkbWFwID0gJCgnLmItZ29vZ2xlLW1hcC5tYXAtdGhlbWUnKTtcbiAgICAgICAgaWYgKCRtYXAubGVuZ3RoID4gMCkge1xuXG4gICAgICAgICAgICB2YXIgbmV3U3JjID0gc2VsZi5yZXBsYWNlU3JjRm9ySW1nKHRoZW1lLCAkKCcubWFya2VyLXRlbXBsYXRlJykuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgaWYgKCFuZXdTcmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKCcubWFya2VyLXRlbXBsYXRlJykuYXR0cignc3JjJywgbmV3U3JjKTtcbiAgICAgICAgICAgICRtYXAudHJpZ2dlcigncmVwbGFjZV9tYXJrZXInKTtcbiAgICAgICAgfVxuICAgICAgICAkKCcuY29sb3ItdGhlbWUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJTcmMgPSAkKHRoaXMpLmF0dHIoJ3NyYycpLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICB2YXIgc3JjVXBkID0gY3VyU3JjW2N1clNyYy5sZW5ndGggLSAyXS5zcGxpdCgnLScpO1xuICAgICAgICAgICAgdmFyIHNyY05ld1RoZW1lO1xuICAgICAgICAgICAgaWYgKHNyY1VwZFtzcmNVcGQubGVuZ3RoIC0gMV0gPT09IHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9IHRoZW1lO1xuICAgICAgICAgICAgc3JjVXBkID0gc3JjVXBkLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIGN1clNyY1tjdXJTcmMubGVuZ3RoIC0gMl0gPSBzcmNVcGQ7XG4gICAgICAgICAgICBzcmNOZXdUaGVtZSA9IGN1clNyYy5qb2luKCcuJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsIHNyY05ld1RoZW1lKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBwYWdlU2hvdzogZnVuY3Rpb24gcGFnZVNob3coKSB7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcubWFzay1sJykuYW5pbWF0ZSh7ICdvcGFjaXR5JzogMCB9LCA4MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNDAwKTtcbiAgICB9XG5cbn07XG5cbi8vIGNvbG9yVGhlbWUuaW5pdCgpO1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IChjb2xvclRoZW1lKTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpIHtcbiAgICB2YXIgbWF0Y2hlcyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIikpO1xuICAgIHJldHVybiBtYXRjaGVzID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoZXNbMV0pIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzO1xuXG4gICAgaWYgKHR5cGVvZiBleHBpcmVzID09IFwibnVtYmVyXCIgJiYgZXhwaXJlcykge1xuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIGV4cGlyZXMgKiAxMDAwKTtcbiAgICAgICAgZXhwaXJlcyA9IG9wdGlvbnMuZXhwaXJlcyA9IGQ7XG4gICAgfVxuICAgIGlmIChleHBpcmVzICYmIGV4cGlyZXMudG9VVENTdHJpbmcpIHtcbiAgICAgICAgb3B0aW9ucy5leHBpcmVzID0gZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblxuICAgIHZhciB1cGRhdGVkQ29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIHVwZGF0ZWRDb29raWUgKz0gXCI7IFwiICsgcHJvcE5hbWU7XG4gICAgICAgIHZhciBwcm9wVmFsdWUgPSBvcHRpb25zW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdXBkYXRlZENvb2tpZSArPSBcIj1cIiArIHByb3BWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmNvb2tpZSA9IHVwZGF0ZWRDb29raWU7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNvb2tpZShuYW1lKSB7XG4gICAgc2V0Q29va2llKG5hbWUsIFwiXCIsIHsgZXhwaXJlczogLTEgfSk7XG59XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKHtcbiAgICBnZXQ6IGdldENvb2tpZSxcbiAgICBzZXQ6IHNldENvb2tpZSxcbiAgICBkZWw6IGRlbGV0ZUNvb2tpZVxufSk7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2FqYXhfanNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5iYXNlVVJMID0gXCJodHRwOi8vZ3VteC50b3A6OTAvYWRtaW4vXCI7XG5cdHRoaXMuYXBpID0ge1xuXHRcdHNvcnQ6IHRoaXMuYmFzZVVSTCArIFwic29ydC9xdWVyeS5hcGlcIixcblx0XHR0ZXh0OiB0aGlzLmJhc2VVUkwgKyBcInRleHQvcXVlcnkuYXBpXCIsXG5cdFx0cmVhZDogdGhpcy5iYXNlVVJMICsgXCJ0ZXh0L3JlYWQuYXBpXCJcblx0fTtcblxuXHREYXRhLnByb3RvdHlwZS5nZXRTb3J0ID0gZnVuY3Rpb24gKHZhbHMpIHtcblx0XHRPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19hamF4X2pzX19bXCJhXCIgLyogZGVmYXVsdCAqL10pKHtcblx0XHRcdHVybDogdGhpcy5hcGkuc29ydCxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHR2YWxzLnNwbGljZSgwLCB2YWxzLmxlbmd0aCk7XG5cdFx0XHRcdGRhdGEudmFscy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0dmFscy5wdXNoKGUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHREYXRhLnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKHZhbHMsIHBhZ2UsIG9wdGlvbikge1xuXHRcdGlmIChvcHRpb24uc29ydF9pZCA9PSAtMSkge1xuXHRcdFx0b3B0aW9uLnNvcnRfaWQgPSAnJztcblx0XHR9XG5cdFx0b3B0aW9uLnBhZ2UgPSBwYWdlLmN1cnJQYWdlO1xuXHRcdG9wdGlvbi5wYWdlU2l6ZSA9IHBhZ2UucGFnZVNpemU7XG5cdFx0T2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fYWpheF9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSh7XG5cdFx0XHR1cmw6IHRoaXMuYXBpLnRleHQsXG5cdFx0XHRkYXRhOiBvcHRpb24sXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcblx0XHRcdFx0dmFscy5zcGxpY2UoMCwgdmFscy5sZW5ndGgpO1xuXHRcdFx0XHRkYXRhLnZhbHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdHZhbHMucHVzaChlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHBhZ2UudG90YWxDb3VudCA9IGRhdGEuY291bnQ7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0RGF0YS5wcm90b3R5cGUucmVhZFRleHQgPSBmdW5jdGlvbiAodGV4dElkKSB7XG5cdFx0T2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fYWpheF9qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dKSh7XG5cdFx0XHR1cmw6IHRoaXMuYXBpLnJlYWQsXG5cdFx0XHRkYXRhOiB7IGlkOiB0ZXh0SWQgfSxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0XHR2YXIgY29udGVudCA9IGRhdGEudmFsO1xuXHRcdFx0XHRjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFwiLS0tc3VtbWFyeS0tLVwiLCBcIj4gXCIpLnJlcGxhY2UoXCItLS1zdW1tYXJ5LS0tXCIsIFwiXFxuXCIpLnJlcGxhY2UoLyZndDsvZywgXCI+IFwiKTtcblx0XHRcdFx0bWFya2VkLnNldE9wdGlvbnMoe1xuXHRcdFx0XHRcdGhpZ2hsaWdodDogZnVuY3Rpb24gaGlnaGxpZ2h0KGNvZGUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBobGpzLmhpZ2hsaWdodEF1dG8oY29kZSkudmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2YXIgaHRtbCA9IG1hcmtlZChjb250ZW50KTtcblx0XHRcdFx0aHRtbCA9IGh0bWwucmVwbGFjZSgvJmFtcDtsdDsvZywgXCImbHQ7XCIpLnJlcGxhY2UoLyZhbXA7Z3Q7L2csIFwiJmd0O1wiKTtcblx0XHRcdFx0JChcIiN0ZXh0Q29udGVudFwiKS5odG1sKGh0bWwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKG5ldyBEYXRhKCkpO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19sb2FkaW5nX2pzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG4vKlxyXG5cdGpzb27kuK3nmoTlj4LmlbBcclxuXHR1cmw66K+35rGC5Zyw5Z2ALCBcdOS4jeiDveS4uuepulxyXG5cdGRhdGE65Y+C5pWwICAgICAgXHTlj6/ku6XkuLrnqbpcclxuXHRzdWNjZXNzOuaIkOWKn+eahOWbnuiwg+WHveaVsCDlj6/ku6XkuLrnqbogXHJcblx0ZXJyb3I6IOWksei0peeahOWbnuiwg+WHveaVsCDlj6/ku6XkuLrnqbpcclxuXHRsb2FkaW5nOiDmmK/lkKbpmpDol4/liqDovb3liqjnlLsg5Y+v5Lul5Li656m6XHTpu5jorqTmmL7npLogdHJ1ZS9mYWxzZVxyXG5cdGFsZXJ0OiDmmK/lkKbpmpDol4/plJnor6/mj5DnpLog5Y+v5Lul5Li656m6IOm7mOiupOaPkOekuiB0cnVlL2ZhbHNlXHJcblx0ICAgICAgICAgICAgXHJcblx0Ly/mqKHmnb9cclxuXHRhamF4KHtcclxuXHRcdHVybDpcIlwiLFxyXG5cdFx0ZGF0YTpkYXRhLFxyXG5cdFx0c3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuXHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG4qL1xuXG4vLyB2YXIgbG9hZGluZyA9IHJlcXVpcmUoJy4vbG9hZGluZy5qcycpO1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoZnVuY3Rpb24gKGpzb24pIHtcblx0aWYgKHR5cGVvZiBqc29uLmRhdGEgPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdGpzb24uZGF0YSA9IHt9O1xuXHR9XG5cblx0aWYgKGZhbHNlICE9IGpzb24ubG9hZGluZykge1xuXHRcdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fbG9hZGluZ19qc19fW1wiYVwiIC8qIGRlZmF1bHQgKi9dLnNob3coKTtcblx0fVxuXHR2YXIgYWpheCA9ICQuYWpheCh7XG5cdFx0dXJsOiBqc29uLnVybCxcblx0XHRkYXRhOiBqc29uLmRhdGEsXG5cdFx0dHlwZTogJ3Bvc3QnLFxuXHRcdGNhY2hlOiBmYWxzZSxcblx0XHRkYXRhVHlwZTogJ2pzb24nLFxuXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuXHRcdFx0aWYgKGZhbHNlICE9IGpzb24ubG9hZGluZykge1xuXHRcdFx0XHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2xvYWRpbmdfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5oaWRlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkYXRhLmVyckNvZGUgPT0gMCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGpzb24uc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRqc29uLnN1Y2Nlc3MoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmFsZXJ0ICYmIHR5cGVvZiBkYXRhLmVyck1zZyAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0bGF5ZXIuYWxlcnQoZGF0YS5lcnJNc2csIHsgdGl0bGU6ICforablkYonLCBpY29uOiAyLCBzY3JvbGxiYXI6IGZhbHNlIH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBqc29uLmVycm9yID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGpzb24uZXJyb3IoZGF0YSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGVycm9yOiBmdW5jdGlvbiBlcnJvcihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcblx0XHRcdGlmIChYTUxIdHRwUmVxdWVzdC5zdGF0dXMgPT0gMjAwKSB7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJ3ZWJfdXNlcl9wYWdlX2xvZ2luLmRvXCI7XG5cdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmxvYWRpbmcpIHtcblx0XHRcdFx0XHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2xvYWRpbmdfanNfX1tcImFcIiAvKiBkZWZhdWx0ICovXS5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVycm9yVGhyb3duICE9IFwiYWJvcnRcIikge1xuXHRcdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmFsZXJ0KSB7XG5cdFx0XHRcdFx0XHRsYXllci5hbGVydCgn57O757uf6ZSZ6K+v77yI6ZO+5o6l5Lit5pat77yJ77yBJywgeyB0aXRsZTogJ+itpuWRiicsIGljb246IDIsIHNjcm9sbGJhcjogZmFsc2UgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0eXBlb2YganNvbi5lcnJvciA9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGpzb24uZXJyb3IoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGNvbXBsZXRlOiBmdW5jdGlvbiBjb21wbGV0ZShYSFIsIFRTKSB7XG5cdFx0XHRpZiAodHlwZW9mIGpzb24uY29tcGxldGUgPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdGpzb24uY29tcGxldGUoVFMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIGFqYXg7XG59KTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gTG9hZGluZygpIHt9XG5Mb2FkaW5nLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuXHQkKFwiI2xvYWRpbmdcIikuc2hvdygpO1xufTtcblxuTG9hZGluZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcblx0JChcIiNsb2FkaW5nXCIpLmhpZGUoKTtcbn07XG52YXIgbG9hZGluZyA9IG5ldyBMb2FkaW5nKCk7XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKGxvYWRpbmcpO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcGFnZSA9IHtcblx0Y3VyclBhZ2U6IDEsXG5cdHBhZ2VTaXplOiA1LFxuXHR0b3RhbENvdW50OiAwLFxuXHR0b3RhbFBhZ2U6IDBcbn07XG5cbnZhciB0ZW1wID0ge307XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYWdlLCAndG90YWxDb3VudCcsIHtcblx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0cmV0dXJuIHRlbXAudG90YWxDb3VudDtcblx0fSxcblx0c2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdFx0dGVtcC50b3RhbENvdW50ID0gdmFsO1xuXHRcdHBhZ2UudG90YWxQYWdlID0gcGFyc2VJbnQodmFsIC8gcGFnZS5wYWdlU2l6ZSkgKyAodmFsICUgcGFnZS5wYWdlU2l6ZSA+IDAgPyAxIDogMCk7XG5cdFx0Y29uc29sZS5sb2cocGFnZSk7XG5cdH1cbn0pO1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gKHBhZ2UpO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGJ1aWxkLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMjBkYmQ0ZjRhNTM2ZDZjNTU3MjciLCJpbXBvcnQgdGhlbWUgZnJvbSAnLi9qcy9jb2xvci10aGVtZXMuanMnO1xyXG5pbXBvcnQgZGF0YSBmcm9tICcuL2pzL2RhdGEuanMnO1xyXG5pbXBvcnQgcGFnZSBmcm9tICcuL2pzL3BhZ2UuanMnXHJcblxyXG5cclxudmFyIGFwcCA9IG5ldyBWdWUoe1xyXG5cdGVsOlwiLmwtbWFpbi1jb250YWluZXJcIixcclxuXHRkYXRhOntcclxuXHRcdHNvcnQ6W10sXHJcblx0XHR0ZXh0OltdLFxyXG5cdFx0Y29udGVudFZpZXc6XCJsaXN0XCIsIC8vdGV4dC9saXN0XHJcblx0XHRzZWFyY2hUaXRsZTpcIlwiLFxyXG5cdFx0c2VsZWN0ZWRTb3J0SWQ6LTEsXHJcblx0XHRzZWxlY3RlZFRleHQ6bnVsbCxcclxuXHRcdHBhZ2U6cGFnZSxcclxuXHR9LFxyXG5cdG1vdW50ZWQ6ZnVuY3Rpb24oKXtcclxuXHRcdHRoZW1lLmluaXQoKTtcclxuXHR9LFxyXG5cdGNyZWF0ZWQ6ZnVuY3Rpb24oKXtcclxuXHRcdGRhdGEuZ2V0U29ydCh0aGlzLnNvcnQpO1xyXG5cdFx0ZGF0YS5nZXRUZXh0KHRoaXMudGV4dCxwYWdlLHt9KTtcclxuXHR9LFxyXG5cdGNvbXB1dGVkOntcclxuXHRcdHNlbGVjdGVkU29ydDpmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgcyA9IHtpZDotMSxuYW1lOlwi5YWo6YOoXCJ9O1xyXG5cdFx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblx0XHRcdHRoaXMuc29ydC5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRcdGlmICh0aGF0LnNlbGVjdGVkU29ydElkID09IGUuaWQpIHtcclxuXHRcdFx0XHRcdHMgPSBlO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBzO1xyXG5cdFx0fSxcclxuXHR9LFxyXG5cdHdhdGNoOntcclxuXHRcdHNlbGVjdGVkU29ydElkOmZ1bmN0aW9uIChudikge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFRleHQoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdG1ldGhvZHM6e1xyXG5cdFx0c29ydE5hbWU6ZnVuY3Rpb24oc29ydF9pZCl7XHJcblx0XHRcdHZhciBzID0gXCJcIjtcclxuXHRcdFx0dGhpcy5zb3J0LmZvckVhY2goZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0aWYgKHNvcnRfaWQgPT0gZS5pZCkge1xyXG5cdFx0XHRcdFx0cyA9IGUubmFtZTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gcztcclxuXHRcdH0sXHJcblx0XHRzZWFyY2hUZXh0OmZ1bmN0aW9uKCl7XHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gbnVsbDtcclxuXHRcdFx0dGhpcy5jb250ZW50VmlldyA9IFwibGlzdFwiO1xyXG5cdFx0XHRkYXRhLmdldFRleHQodGhpcy50ZXh0LHBhZ2Use3NvcnRfaWQ6dGhpcy5zZWxlY3RlZFNvcnRJZCx0aXRsZTp0aGlzLnNlYXJjaFRpdGxlfSk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCk7XHJcblx0XHRcdGlmIChqUXVlcnkoXCIucGFnZVwiKS5zY3JvbGxUb3AoKSA+IDI1MCkgeyQoXCIucGFnZVwiKS5zY3JvbGxUb3AoMjUwKTt9XHJcblx0XHRcdFxyXG5cdFx0fSxcclxuXHRcdHJlYWRUZXh0OmZ1bmN0aW9uKHRleHQpe1xyXG5cdFx0XHR0aGlzLmNvbnRlbnRWaWV3ID0gXCJ0ZXh0XCI7XHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRUZXh0ID0gdGV4dDtcclxuXHRcdFx0ZGF0YS5yZWFkVGV4dCh0ZXh0LmlkKTtcclxuXHRcdH0sXHJcblx0fSxcclxufSlcclxuXHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYXBwLmpzIiwiaW1wb3J0IGNvb2tpZSBmcm9tICcuL2Nvb2tpZS5qcydcbnZhciBjb2xvclRoZW1lID0ge1xuICAgIENPT0tJRV9USEVNRTogJ2NvbG9yLXRoZW1lJyxcbiAgICAkY29sb3JJdGVtczogJCgnLmNvbG9yLXRoZW1lcyA+IGxpJyksXG4gICAgY29sb3JzOiB7XG4gICAgICAgIGRlZmF1bHQ6ICdtYWluLWRlZmF1bHQnLFxuICAgICAgICBjeWFuOiAnbWFpbi1jeWFuJyxcbiAgICAgICAgZ3JlZW46ICdtYWluLWdyZWVuJyxcbiAgICAgICAgcmVkOiAnbWFpbi1yZWQnLFxuICAgICAgICB5ZWxsb3c6ICdtYWluLXllbGxvdycsXG4gICAgICAgIGJsdWU6ICdtYWluLWJsdWUnXG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuY3VyQ29va2llVGhlbWUoKTtcbiAgICAgICAgc2VsZi4kY29sb3JJdGVtcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIGN1ckVsZW1lbnQgPSAkKHRoaXMpLmRhdGEoJ2NvbG9yJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXRUaGVtZShjdXJFbGVtZW50KTsgLy9yZXBsYWNlbWVudCBvZiBjb2xvciBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHNlbGYucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXBsYWNlSW1hZ2VzKGN1ckVsZW1lbnQpOy8vcmVwbGFjZW1lbnQgcGljdHVyZXMgZm9yIHN0eWxlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkKCdbZGF0YS1yZXNldF0nKS5vbigncmVzZXRDb2xvcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnNldFRoZW1lKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VNYXJrZXJGb3JNYXBzKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnJlcGxhY2VJbWFnZXMoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIGNvb2tpZS5zZXQoc2VsZi5DT09LSUVfVEhFTUUsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzZWxmLnNldEFjdGl2ZUl0ZW0oJ2RlZmF1bHQnKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjdXJDb29raWVUaGVtZTogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGN1ckNvb2tpZVRoZW1lID0gY29va2llLmdldCh0aGlzLkNPT0tJRV9USEVNRSk7XG4gICAgICAgIGlmIChjdXJDb29raWVUaGVtZSkge1xuICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXJWMShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgICAgICB0aGlzLnNldFRoZW1lKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZU1hcmtlckZvck1hcHMoY3VyQ29va2llVGhlbWUpO1xuICAgICAgICAgICAgdGhpcy5yZXBsYWNlSW1hZ2VzKGN1ckNvb2tpZVRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlSXRlbShjdXJDb29raWVUaGVtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VTaG93KCk7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlclYxKCdkZWZhdWx0Jyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHByZWxvYWRlclYxOiBmdW5jdGlvbihjdXJUaCl7XG4gICAgICAgIHZhciAkY29sb3JUaGVtZVByZWxvYWRlciA9ICQoJy5jb2xvci10aGVtZS1wcmVsb2FkZXInKTtcbiAgICAgICAgaWYgKCRjb2xvclRoZW1lUHJlbG9hZGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHRoaXMucmVwbGFjZVNyY0ZvckltZyhjdXJUaCwgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJykpO1xuICAgICAgICAgICAgdmFyIHRlbXBJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHRlbXBJbWcuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGVtcEltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGNvbG9yVGhlbWVQcmVsb2FkZXIuYXR0cignc3JjJywgbmV3U3JjKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0QWN0aXZlSXRlbTogZnVuY3Rpb24odGhlbWUpe1xuICAgICAgICB0aGlzLiRjb2xvckl0ZW1zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kY29sb3JJdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2NvbG9yJykgPT09IHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2V0VGhlbWU6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyICRsaW5rVGhlbWUgPSAkKCdsaW5rW2RhdGEtdGhlbWVjb2xvcl0nKSxcbiAgICAgICAgY3VyVGhlbWUgPSAkbGlua1RoZW1lLmRhdGEoJ3RoZW1lY29sb3InKSxcbiAgICAgICAgYXR0ckVsID0gJGxpbmtUaGVtZS5hdHRyKCdocmVmJyk7XG4gICAgICAgIGlmIChjdXJUaGVtZSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhdHRyRWwgPSBhdHRyRWwucmVwbGFjZSh0aGlzLmNvbG9yc1tjdXJUaGVtZV0gKyAnLmNzcycsIHRoaXMuY29sb3JzW3RoZW1lXSArICcuY3NzJyk7XG4gICAgICAgICRsaW5rVGhlbWUuZGF0YSgndGhlbWVjb2xvcicsIHRoZW1lKTtcbiAgICAgICAgJGxpbmtUaGVtZS5hdHRyKCdocmVmJywgYXR0ckVsKTtcbiAgICAgICAgaWYgKGNvb2tpZS5nZXQodGhpcy5DT09LSUVfVEhFTUUpICE9PSB0aGVtZSkge1xuICAgICAgICAgICAgY29va2llLnNldCh0aGlzLkNPT0tJRV9USEVNRSwgdGhlbWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXBsYWNlU3JjRm9ySW1nOiBmdW5jdGlvbih0aGVtZSwgc3JjKXtcbiAgICAgICAgdmFyIGN1clNyYyA9IHNyYy5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgc3JjVXBkID0gY3VyU3JjW2N1clNyYy5sZW5ndGggLSAyXS5zcGxpdCgnLScpO1xuICAgICAgICBpZiAoc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9PT0gdGhlbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgIH1cbiAgICAgICAgc3JjVXBkW3NyY1VwZC5sZW5ndGggLSAxXSA9IHRoZW1lO1xuICAgICAgICBzcmNVcGQgPSBzcmNVcGQuam9pbignLScpO1xuICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICByZXR1cm4gY3VyU3JjLmpvaW4oJy4nKTtcbiAgICB9LFxuICAgIHJlcGxhY2VJbWFnZXM6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJGltZ1RoZW1lID0gJCgnLmNvbG9yLXRoZW1lJyksXG4gICAgICAgIGltZ1RoZW1lTnVtID0gJGltZ1RoZW1lLmxlbmd0aCxcbiAgICAgICAgY291bnRJbWcgPSAwO1xuICAgICAgICAkaW1nVGhlbWUuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB2YXIgbmV3U3JjID0gc2VsZi5yZXBsYWNlU3JjRm9ySW1nKHRoZW1lLCAkKHRoaXMpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGlmICghbmV3U3JjKSB7XG4gICAgICAgICAgICAgICAgY291bnRJbWcrKztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICBpbWcuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb3VudEltZysrO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudEltZyA9PT0gaW1nVGhlbWVOdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlU2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVwbGFjZU1hcmtlckZvck1hcHM6IGZ1bmN0aW9uKHRoZW1lKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgJG1hcCA9ICQoJy5iLWdvb2dsZS1tYXAubWFwLXRoZW1lJyk7XG4gICAgICAgIGlmICgkbWFwLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgdmFyIG5ld1NyYyA9IHNlbGYucmVwbGFjZVNyY0ZvckltZyh0aGVtZSwgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycpKTtcbiAgICAgICAgICAgIGlmICghbmV3U3JjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCgnLm1hcmtlci10ZW1wbGF0ZScpLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICAkbWFwLnRyaWdnZXIoJ3JlcGxhY2VfbWFya2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnLmNvbG9yLXRoZW1lJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3VyU3JjID0gJCh0aGlzKS5hdHRyKCdzcmMnKS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIHNyY1VwZCA9IGN1clNyY1tjdXJTcmMubGVuZ3RoIC0gMl0uc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIHZhciBzcmNOZXdUaGVtZTtcbiAgICAgICAgICAgIGlmIChzcmNVcGRbc3JjVXBkLmxlbmd0aCAtIDFdID09PSB0aGVtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNyY1VwZFtzcmNVcGQubGVuZ3RoIC0gMV0gPSB0aGVtZTtcbiAgICAgICAgICAgIHNyY1VwZCA9IHNyY1VwZC5qb2luKCctJyk7XG4gICAgICAgICAgICBjdXJTcmNbY3VyU3JjLmxlbmd0aCAtIDJdID0gc3JjVXBkO1xuICAgICAgICAgICAgc3JjTmV3VGhlbWUgPSBjdXJTcmMuam9pbignLicpO1xuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzcmMnLCBzcmNOZXdUaGVtZSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgcGFnZVNob3c6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcubWFzay1sJykuYW5pbWF0ZSh7J29wYWNpdHknOiAwfSwgODAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfVxuXG59O1xuXG4vLyBjb2xvclRoZW1lLmluaXQoKTtcbmV4cG9ydCBkZWZhdWx0IGNvbG9yVGhlbWU7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL2NvbG9yLXRoZW1lcy5qcyIsImZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cChcbiAgICAgICAgICAgIFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIlxuICAgICkpO1xuICAgIHJldHVybiBtYXRjaGVzID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoZXNbMV0pIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzO1xuXG4gICAgaWYgKHR5cGVvZiBleHBpcmVzID09IFwibnVtYmVyXCIgJiYgZXhwaXJlcykge1xuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIGV4cGlyZXMgKiAxMDAwKTtcbiAgICAgICAgZXhwaXJlcyA9IG9wdGlvbnMuZXhwaXJlcyA9IGQ7XG4gICAgfVxuICAgIGlmIChleHBpcmVzICYmIGV4cGlyZXMudG9VVENTdHJpbmcpIHtcbiAgICAgICAgb3B0aW9ucy5leHBpcmVzID0gZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgIH1cblxuICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblxuICAgIHZhciB1cGRhdGVkQ29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWU7XG5cbiAgICBmb3IodmFyIHByb3BOYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgdXBkYXRlZENvb2tpZSArPSBcIjsgXCIgKyBwcm9wTmFtZTtcbiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IG9wdGlvbnNbcHJvcE5hbWVdO1xuICAgICAgICBpZiAocHJvcFZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB1cGRhdGVkQ29va2llICs9IFwiPVwiICsgcHJvcFZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuY29va2llID0gdXBkYXRlZENvb2tpZTtcbn1cblxuZnVuY3Rpb24gZGVsZXRlQ29va2llKG5hbWUpIHtcbiAgICBzZXRDb29raWUobmFtZSwgXCJcIiwgeyBleHBpcmVzOiAtMSB9KVxufVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdldDpnZXRDb29raWUsXG4gICAgc2V0OnNldENvb2tpZSxcbiAgICBkZWw6ZGVsZXRlQ29va2llLFxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9jb29raWUuanMiLCJpbXBvcnQgYWpheCBmcm9tICcuL2FqYXguanMnO1xyXG5cclxuXHJcbmZ1bmN0aW9uIERhdGEoKXtcclxuXHR0aGlzLmJhc2VVUkwgPSBcImh0dHA6Ly9ndW14LnRvcDo5MC9hZG1pbi9cIjtcclxuXHR0aGlzLmFwaSA9IHtcclxuXHRcdHNvcnQ6dGhpcy5iYXNlVVJMICsgXCJzb3J0L3F1ZXJ5LmFwaVwiLFxyXG5cdFx0dGV4dDp0aGlzLmJhc2VVUkwgKyBcInRleHQvcXVlcnkuYXBpXCIsXHJcblx0XHRyZWFkOnRoaXMuYmFzZVVSTCArIFwidGV4dC9yZWFkLmFwaVwiLFxyXG5cdH07XHJcblxyXG5cdERhdGEucHJvdG90eXBlLmdldFNvcnQgPSBmdW5jdGlvbih2YWxzKXtcclxuXHRcdGFqYXgoe1xyXG5cdFx0XHR1cmw6dGhpcy5hcGkuc29ydCxcclxuXHRcdFx0c3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHR2YWxzLnNwbGljZSgwLHZhbHMubGVuZ3RoKTtcclxuXHRcdFx0XHRkYXRhLnZhbHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YWxzLnB1c2goZSl9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG5cdERhdGEucHJvdG90eXBlLmdldFRleHQgPSBmdW5jdGlvbih2YWxzLHBhZ2Usb3B0aW9uKXtcclxuXHRcdGlmIChvcHRpb24uc29ydF9pZD09LTEpIHtvcHRpb24uc29ydF9pZD0nJzt9XHJcblx0XHRvcHRpb24ucGFnZSA9IHBhZ2UuY3VyclBhZ2U7XHJcblx0XHRvcHRpb24ucGFnZVNpemUgPSBwYWdlLnBhZ2VTaXplO1xyXG5cdFx0YWpheCh7XHJcblx0XHRcdHVybDp0aGlzLmFwaS50ZXh0LFxyXG5cdFx0XHRkYXRhOm9wdGlvbixcclxuXHRcdFx0c3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHR2YWxzLnNwbGljZSgwLHZhbHMubGVuZ3RoKTtcclxuXHRcdFx0XHRkYXRhLnZhbHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YWxzLnB1c2goZSl9KTtcclxuXHRcdFx0XHRwYWdlLnRvdGFsQ291bnQgPSBkYXRhLmNvdW50O1x0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHREYXRhLnByb3RvdHlwZS5yZWFkVGV4dCA9IGZ1bmN0aW9uKHRleHRJZCl7XHJcblx0XHRhamF4KHtcclxuXHRcdFx0dXJsOnRoaXMuYXBpLnJlYWQsXHJcblx0XHRcdGRhdGE6e2lkOnRleHRJZH0sXHJcblx0XHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcblx0XHRcdFx0dmFyIGNvbnRlbnQgPSBkYXRhLnZhbDtcclxuXHRcdFx0XHRjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFwiLS0tc3VtbWFyeS0tLVwiLFwiPiBcIikucmVwbGFjZShcIi0tLXN1bW1hcnktLS1cIixcIlxcblwiKS5yZXBsYWNlKC8mZ3Q7L2csXCI+IFwiKTtcclxuXHRcdFx0XHRtYXJrZWQuc2V0T3B0aW9ucyh7XHJcblx0XHRcdFx0XHRoaWdobGlnaHQ6IGZ1bmN0aW9uIChjb2RlKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBobGpzLmhpZ2hsaWdodEF1dG8oY29kZSkudmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHZhciBodG1sID0gbWFya2VkKGNvbnRlbnQpO1xyXG5cdFx0XHRcdGh0bWwgPSBodG1sLnJlcGxhY2UoLyZhbXA7bHQ7L2csXCImbHQ7XCIpLnJlcGxhY2UoLyZhbXA7Z3Q7L2csXCImZ3Q7XCIpXHJcblx0XHRcdFx0JChcIiN0ZXh0Q29udGVudFwiKS5odG1sKGh0bWwpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBEYXRhKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL2RhdGEuanMiLCJcclxuLypcclxuXHRqc29u5Lit55qE5Y+C5pWwXHJcblx0dXJsOuivt+axguWcsOWdgCwgXHTkuI3og73kuLrnqbpcclxuXHRkYXRhOuWPguaVsCAgICAgIFx05Y+v5Lul5Li656m6XHJcblx0c3VjY2VzczrmiJDlip/nmoTlm57osIPlh73mlbAg5Y+v5Lul5Li656m6IFxyXG5cdGVycm9yOiDlpLHotKXnmoTlm57osIPlh73mlbAg5Y+v5Lul5Li656m6XHJcblx0bG9hZGluZzog5piv5ZCm6ZqQ6JeP5Yqg6L295Yqo55S7IOWPr+S7peS4uuepulx06buY6K6k5pi+56S6IHRydWUvZmFsc2VcclxuXHRhbGVydDog5piv5ZCm6ZqQ6JeP6ZSZ6K+v5o+Q56S6IOWPr+S7peS4uuepuiDpu5jorqTmj5DnpLogdHJ1ZS9mYWxzZVxyXG5cdCAgICAgICAgICAgIFxyXG5cdC8v5qih5p2/XHJcblx0YWpheCh7XHJcblx0XHR1cmw6XCJcIixcclxuXHRcdGRhdGE6ZGF0YSxcclxuXHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcblxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuKi9cclxuXHJcblxyXG5cclxuXHJcbi8vIHZhciBsb2FkaW5nID0gcmVxdWlyZSgnLi9sb2FkaW5nLmpzJyk7XHJcblxyXG5pbXBvcnQgbG9hZGluZyBmcm9tICcuL2xvYWRpbmcuanMnO1xyXG5leHBvcnQgZGVmYXVsdCAgZnVuY3Rpb24oanNvbil7XHJcblx0aWYgKHR5cGVvZiBqc29uLmRhdGEgPT0gXCJ1bmRlZmluZWRcIikge2pzb24uZGF0YSA9IHt9O31cclxuXHJcblx0aWYgKGZhbHNlICE9IGpzb24ubG9hZGluZykge1xyXG5cdFx0bG9hZGluZy5zaG93KCk7XHJcblx0fVxyXG5cdHZhciBhamF4ID0gJC5hamF4KHsgICAgXHJcblx0XHR1cmw6anNvbi51cmwsXHJcblx0XHRkYXRhOmpzb24uZGF0YSxcclxuXHRcdHR5cGU6J3Bvc3QnLFxyXG5cdFx0Y2FjaGU6ZmFsc2UsICAgIFxyXG5cdFx0ZGF0YVR5cGU6J2pzb24nLCAgICBcclxuXHRcdHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5sb2FkaW5nKSB7XHJcblx0XHRcdFx0bG9hZGluZy5oaWRlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChkYXRhLmVyckNvZGUgPT0gMCkge1xyXG5cdFx0XHRcdGlmICh0eXBlb2YganNvbi5zdWNjZXNzID09IFwiZnVuY3Rpb25cIil7XHJcblx0XHRcdFx0XHRqc29uLnN1Y2Nlc3MoZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5hbGVydCAmJiB0eXBlb2YgZGF0YS5lcnJNc2cgIT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdFx0XHRcdFx0bGF5ZXIuYWxlcnQoZGF0YS5lcnJNc2csIHt0aXRsZSA6J+itpuWRiicsaWNvbjogMixzY3JvbGxiYXI6IGZhbHNlfSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAodHlwZW9mIGpzb24uZXJyb3IgPT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRcdFx0XHRqc29uLmVycm9yKGRhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSwgICAgXHJcblx0XHRlcnJvciA6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xyXG5cdFx0XHRpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJ3ZWJfdXNlcl9wYWdlX2xvZ2luLmRvXCI7XHJcblx0XHRcdFx0fSw1MDApXHJcblx0XHRcdH1lbHNle1xyXG5cclxuXHRcdFx0XHRpZiAoZmFsc2UgIT0ganNvbi5sb2FkaW5nKSB7XHJcblx0XHRcdFx0XHRsb2FkaW5nLmhpZGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGVycm9yVGhyb3duICE9IFwiYWJvcnRcIiApIHtcclxuXHRcdFx0XHRcdGlmIChmYWxzZSAhPSBqc29uLmFsZXJ0KSB7XHJcblx0XHRcdFx0XHRcdGxheWVyLmFsZXJ0KCfns7vnu5/plJnor6/vvIjpk77mjqXkuK3mlq3vvInvvIEnLCB7dGl0bGUgOiforablkYonLGljb246IDIsc2Nyb2xsYmFyOiBmYWxzZX0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBqc29uLmVycm9yID09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0XHRcdFx0XHRqc29uLmVycm9yKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0Y29tcGxldGU6ZnVuY3Rpb24oWEhSLFRTKXtcclxuXHRcdFx0aWYgKHR5cGVvZiBqc29uLmNvbXBsZXRlID09IFwiZnVuY3Rpb25cIil7XHJcblx0XHRcdFx0anNvbi5jb21wbGV0ZShUUyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbiAgICByZXR1cm4gYWpheDtcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9hamF4LmpzIiwiZnVuY3Rpb24gTG9hZGluZygpe31cclxuTG9hZGluZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCl7XHJcblx0JChcIiNsb2FkaW5nXCIpLnNob3coKTtcclxufVxyXG5cclxuTG9hZGluZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCl7XHJcblx0JChcIiNsb2FkaW5nXCIpLmhpZGUoKTtcclxufVxyXG52YXIgbG9hZGluZyA9IG5ldyBMb2FkaW5nO1xyXG5leHBvcnQgZGVmYXVsdCBsb2FkaW5nO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9sb2FkaW5nLmpzIiwidmFyIHBhZ2UgPSB7XHJcblx0Y3VyclBhZ2UgOiAxLFxyXG5cdHBhZ2VTaXplIDogNSxcclxuXHR0b3RhbENvdW50IDogMCxcclxuXHR0b3RhbFBhZ2UgOiAwLFxyXG59XHJcblxyXG52YXIgdGVtcCA9IHt9O1xyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhZ2UsJ3RvdGFsQ291bnQnLHtcclxuXHRnZXQ6ZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB0ZW1wLnRvdGFsQ291bnQ7XHJcblx0fSxcclxuXHRzZXQ6ZnVuY3Rpb24odmFsKXtcclxuXHRcdHRlbXAudG90YWxDb3VudCA9IHZhbDtcclxuXHRcdHBhZ2UudG90YWxQYWdlID0gcGFyc2VJbnQodmFsIC8gcGFnZS5wYWdlU2l6ZSkgKyAodmFsICUgcGFnZS5wYWdlU2l6ZSA+IDAgPyAxIDogMCk7XHJcblx0XHRjb25zb2xlLmxvZyhwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHBhZ2U7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3BhZ2UuanMiXSwic291cmNlUm9vdCI6IiJ9